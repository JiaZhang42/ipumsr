<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to <code>ipumsr</code> - IPUMS Data in R • ipumsr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Introduction to &lt;code&gt;ipumsr&lt;/code&gt; - IPUMS Data in R">
<meta property="og:description" content="">
<meta property="og:image" content="http://tech.popdata.org/ipumsr/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ipumsr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ipums.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ipums.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/value-labels.html">Value labels</a>
    </li>
    <li>
      <a href="../articles/ipums-geography.html">Geographic data in ipumsr</a>
    </li>
    <li>
      <a href="../articles/ipums-bigdata.html">Big IPUMS data</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/ipums-cps.html">CPS exercise</a>
    </li>
    <li>
      <a href="../articles/ipums-nhgis.html">NHGIS exercise</a>
    </li>
    <li>
      <a href="../articles/ipums-terra.html">IPUMS Terra exercise</a>
    </li>
    <li>
      <a href="https://ipums.org/exercises.shtml">More project exercises</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mnpopcenter/ipumsr">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://forum.ipums.org">
    <span class="fa fa-users"></span>
     
  </a>
</li>
<li>
  <a href="https://www.ipums.org/">
    <span class="fa fa-globe"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to <code>ipumsr</code> - IPUMS Data in R</h1>
                        <h4 class="author">Minnesota Population Center</h4>
            
            <h4 class="date">2019-03-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mnpopcenter/ipumsr/blob/master/vignettes/ipums.Rmd"><code>vignettes/ipums.Rmd</code></a></small>
      <div class="hidden name"><code>ipums.Rmd</code></div>

    </div>

    
    
<p>The <code>ipumsr</code> package allows you to read in data from your extract into R along with the associated metadata like variable labels, value labels and more. IPUMS is a great source of international census and survey data.</p>
<blockquote>
<p>IPUMS provides census and survey data from around the world integrated across time and space. IPUMS integration and documentation makes it easy to study change, conduct comparative research, merge information across data types, and analyze individuals within family and community context. Data and services are available free of charge.</p>
</blockquote>
<p>Learn more here: <a href="https://www.ipums.org/whatIsIPUMS.shtml" class="uri">https://www.ipums.org/whatIsIPUMS.shtml</a></p>
<div id="basics" class="section level1">
<h1 class="hasAnchor">
<a href="#basics" class="anchor"></a>Basics</h1>
<p>This vignette gives the basic outline of the <code>ipumsr</code> package. There are also vignettes that show how to use the value labels and geographic data provided by IPUMS and others that run through examples using CPS data and NHGIS data.</p>
<p>To get to them run the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/vignette">vignette</a></span>(<span class="st">"value-labels"</span>, <span class="dt">package =</span> <span class="st">"ipumsr"</span>)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/vignette">vignette</a></span>(<span class="st">"ipums-geography"</span>, <span class="dt">package =</span> <span class="st">"ipumsr"</span>)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/vignette">vignette</a></span>(<span class="st">"ipums-cps"</span>, <span class="dt">package =</span> <span class="st">"ipumsr"</span>)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/vignette">vignette</a></span>(<span class="st">"ipums-nhgis"</span>, <span class="dt">package =</span> <span class="st">"ipumsr"</span>)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/vignette">vignette</a></span>(<span class="st">"ipums-terra"</span>, <span class="dt">package =</span> <span class="st">"ipumsr"</span>)</a></code></pre></div>
<div id="getting-data-from-the-ipums-website" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-data-from-the-ipums-website" class="anchor"></a>Getting Data from the IPUMS website</h2>
<p>IPUMS data is downloaded from our website at <a href="https://www.ipums.org" class="uri">https://www.ipums.org</a>. The website provides an interactive extract system that allows you to select only the sample and variables that are relevant to your research question.</p>
<p><strong>For microdata projects (all supported projects except NHGIS and IPUMS Terra)</strong>, once you have created your extract, you should choose to download data as either fixed-width-files or comma separated ones.</p>
<p>Once your extract is complete, download the data file (.dat or .csv) and the DDI. Downloading the DDI is a little bit different depending on your computer. On most browsers you should right-click the file and select “Save As…”. If this saves a “.xml” file, then you should be ready. However, Safari users must select “Download Linked File” instead of “Download Linked File <strong>As</strong>”. On Safari, selecting the wrong version of these two will download an “.html” file instead of a “.xml” one.</p>
<div class="figure">
<img src="microdata_annotated_screenshot.png" alt="Annotated screenshot for downloading microdata (may look different on your computer)" width="700"><p class="caption">Annotated screenshot for downloading microdata (may look different on your computer)</p>
</div>
<p><strong>For NHGIS</strong>, download the table data as a csv, and, if you want the associated mapping data, the GIS data. NHGIS provides the option to download csvs with an extra header row, it does not matter which option you select.</p>
<p><strong>For IPUMS Terra</strong>, download the .zip extract “bundles”. If you want the associated mapping data, select the “include boundary files” option. You do not need to unzip the data.</p>
</div>
<div id="import-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#import-functions" class="anchor"></a>Import Functions</h2>
<p>Once your extract is downloaded, the <code>ipumsr</code> package functions <code>read_*()</code> help you load the data into R.</p>
<ul>
<li>
<code><a href="../reference/read_ipums_micro.html">read_ipums_micro()</a></code> / <code><a href="../reference/read_ipums_micro.html">read_ipums_micro_list()</a></code>: Reads data from microdata projects (USA, CPS, International, DHS, Time Use, Health Surveys and Higher Ed)</li>
<li>
<code><a href="../reference/read_nhgis.html">read_nhgis()</a></code> / <code><a href="../reference/read_nhgis.html">read_nhgis_sf()</a></code> / <code><a href="../reference/read_nhgis.html">read_nhgis_sp()</a></code>: Reads data from the NHGIS project. <code>read_nhgis</code> loads only tabular data, whereas <code><a href="../reference/read_nhgis.html">read_nhgis_sf()</a></code> and <code><a href="../reference/read_nhgis.html">read_nhgis_sp()</a></code> load tabular data and shapefiles.</li>
<li>
<code><a href="../reference/read_terra_micro.html">read_terra_micro()</a></code>, <code>read_terra_micro_sf()</code>, <code>read_terra_micro_sp()</code>, <code><a href="../reference/read_terra_area.html">read_terra_area()</a></code> and <code><a href="../reference/read_terra_raster.html">read_terra_raster()</a></code> load data form the IPUMS Terra project.</li>
<li>
<code><a href="../reference/read_ipums_sf.html">read_ipums_sf()</a></code> and <code><a href="../reference/read_ipums_sf.html">read_ipums_sp()</a></code> load boundary files.</li>
<li>
<code><a href="../reference/read_ipums_ddi.html">read_ipums_ddi()</a></code>: Reads DDI files with metadata that are included alongside some extracts (mainly microdata)</li>
<li>
<code><a href="../reference/read_ipums_codebook.html">read_ipums_codebook()</a></code>: Reads the text codebook included alongside some extracts (mainly NHGIS and some TerraPop extracts)</li>
</ul>
</div>
<div id="metadata-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#metadata-functions" class="anchor"></a>Metadata Functions</h2>
<p>Once the data is into R, you can learn information about the extract using the metadata function.</p>
<ul>
<li>
<code><a href="../reference/ipums_view.html">ipums_view()</a></code>: Makes a webpage that displays in the Rstudio Viewer which provides information about the extract as a whole (like your extract notes or the citation information) and the specific variables included (like the variable label, description and value labels).</li>
<li>
<code><a href="../reference/ipums_file_info.html">ipums_file_info()</a></code>: Returns the file-level metadata contained in <code><a href="../reference/ipums_view.html">ipums_view()</a></code> but as a R data structure.</li>
<li>
<code><a href="../reference/ipums_var_info.html">ipums_var_info()</a></code>: Returns the variable-level metadata contained in <code><a href="../reference/ipums_view.html">ipums_view()</a></code> but as a R data structure.</li>
</ul>
</div>
<div id="grab-bag" class="section level2">
<h2 class="hasAnchor">
<a href="#grab-bag" class="anchor"></a>Grab Bag</h2>
<div id="survey-weights" class="section level3">
<h3 class="hasAnchor">
<a href="#survey-weights" class="anchor"></a>Survey Weights</h3>
<p>The data from most projects contain some form of weighting variable that should be used to calculate estimates that are representative of the whole population. Many projects also provide specifications to help estimate variance given the complex design of the survey, such as replicate weights or design variables like STRATUM and PSU. The <a href="https://cran.r-project.org/package=survey">survey package</a> provides functions that allow you to estimate variance taking this into account, and the <a href="https://cran.r-project.org/package=srvyr">srvyr package</a> implements dplyr-like syntax for survey analysis, using the survey package’s functions.</p>
<p>For more information about what these variables mean and how to use them, see the website for the project you are interested in.</p>
</div>
<div id="non-extract-data" class="section level3">
<h3 class="hasAnchor">
<a href="#non-extract-data" class="anchor"></a>Non-Extract Data</h3>
<p>Some projects have data that is not contained within the extract system and so no DDI is provided for this data. In this case, either use the csv if available, or the haven package to read one of the files intended for another statistical software (like Stata, SAS or SPSS).</p>
</div>
<div id="value-labels" class="section level3">
<h3 class="hasAnchor">
<a href="#value-labels" class="anchor"></a>Value Labels</h3>
<p>The way that IPUMS treats value labels does not align with factors (the main way that R is able to store values associated with labels). R’s <code>factor</code> variables can only store values as an integer sequence (1, 2, 3, …), but IPUMS conventions are to store missing / not in universe codes as large numbers, to distinguish them from the normal values.</p>
<p>Therefore, the <code>ipumsr</code> package uses the <code>labelled</code> class from the <code>haven</code> package to store labelled values. See the “value-labels” vignette for more information (<code><a href="../articles/value-labels.html">vignette('value-labels')</a></code>).</p>
<p>In summary, it is generally best if you wish to use the labels, to convert from the <code>labelled</code> class to <code>factor</code> early on in data analysis workflow. This is because many data manipulation functions will lose the associated labels. The function <code><a href="https://forcats.tidyverse.org/reference/as_factor.html">as_factor()</a></code> is the main function to create factors from labels, but often you will need to do more manipulation before that.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ipumsr)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr, <span class="dt">warn.conflicts =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co"># Note that you can pass in the loaded DDI into the `read_ipums_micro()`</span></a>
<a class="sourceLine" id="cb2-5" title="5">cps_ddi &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_ipums_ddi.html">read_ipums_ddi</a></span>(<span class="kw"><a href="../reference/ipums_example.html">ipums_example</a></span>(<span class="st">"cps_00006.xml"</span>))</a>
<a class="sourceLine" id="cb2-6" title="6">cps_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_ipums_micro.html">read_ipums_micro</a></span>(cps_ddi, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb2-7" title="7"></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co"># Show which variables have labels</span></a>
<a class="sourceLine" id="cb2-9" title="9">cps_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="st">  </span><span class="kw">select_if</span>(is.labelled)</a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt; # A tibble: 7,668 x 3</span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="co">#&gt;    STATEFIP       MONTH     INCTOT                              </span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">#&gt;    &lt;int+lbl&gt;      &lt;int+lbl&gt; &lt;dbl+lbl&gt;                           </span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="co">#&gt;  1 55 [Wisconsin] 3 [March]     4883                            </span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="co">#&gt;  2 55 [Wisconsin] 3 [March]     5800                            </span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co">#&gt;  3 55 [Wisconsin] 3 [March] 99999998 [Missing.]                 </span></a>
<a class="sourceLine" id="cb2-17" title="17"><span class="co">#&gt;  4 27 [Minnesota] 3 [March]    14015                            </span></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="co">#&gt;  5 27 [Minnesota] 3 [March]    16552                            </span></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="co">#&gt;  6 27 [Minnesota] 3 [March]     6375                            </span></a>
<a class="sourceLine" id="cb2-20" title="20"><span class="co">#&gt;  7 19 [Iowa]      3 [March] 99999999 [N.I.U. (Not in Universe).]</span></a>
<a class="sourceLine" id="cb2-21" title="21"><span class="co">#&gt;  8 19 [Iowa]      3 [March]        0                            </span></a>
<a class="sourceLine" id="cb2-22" title="22"><span class="co">#&gt;  9 19 [Iowa]      3 [March]      600                            </span></a>
<a class="sourceLine" id="cb2-23" title="23"><span class="co">#&gt; 10 19 [Iowa]      3 [March] 99999999 [N.I.U. (Not in Universe).]</span></a>
<a class="sourceLine" id="cb2-24" title="24"><span class="co">#&gt; # ... with 7,658 more rows</span></a>
<a class="sourceLine" id="cb2-25" title="25"></a>
<a class="sourceLine" id="cb2-26" title="26"><span class="co"># Notice how the tibble print function shows the dbl+lbl class on top</span></a>
<a class="sourceLine" id="cb2-27" title="27"></a>
<a class="sourceLine" id="cb2-28" title="28"><span class="co"># Investigate labels</span></a>
<a class="sourceLine" id="cb2-29" title="29"><span class="kw"><a href="../reference/ipums_var_info.html">ipums_val_labels</a></span>(cps_data<span class="op">$</span>STATEFIP)</a>
<a class="sourceLine" id="cb2-30" title="30"><span class="co">#&gt; # A tibble: 75 x 2</span></a>
<a class="sourceLine" id="cb2-31" title="31"><span class="co">#&gt;      val lbl                 </span></a>
<a class="sourceLine" id="cb2-32" title="32"><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;               </span></a>
<a class="sourceLine" id="cb2-33" title="33"><span class="co">#&gt;  1     1 Alabama             </span></a>
<a class="sourceLine" id="cb2-34" title="34"><span class="co">#&gt;  2     2 Alaska              </span></a>
<a class="sourceLine" id="cb2-35" title="35"><span class="co">#&gt;  3     4 Arizona             </span></a>
<a class="sourceLine" id="cb2-36" title="36"><span class="co">#&gt;  4     5 Arkansas            </span></a>
<a class="sourceLine" id="cb2-37" title="37"><span class="co">#&gt;  5     6 California          </span></a>
<a class="sourceLine" id="cb2-38" title="38"><span class="co">#&gt;  6     8 Colorado            </span></a>
<a class="sourceLine" id="cb2-39" title="39"><span class="co">#&gt;  7     9 Connecticut         </span></a>
<a class="sourceLine" id="cb2-40" title="40"><span class="co">#&gt;  8    10 Delaware            </span></a>
<a class="sourceLine" id="cb2-41" title="41"><span class="co">#&gt;  9    11 District of Columbia</span></a>
<a class="sourceLine" id="cb2-42" title="42"><span class="co">#&gt; 10    12 Florida             </span></a>
<a class="sourceLine" id="cb2-43" title="43"><span class="co">#&gt; # ... with 65 more rows</span></a>
<a class="sourceLine" id="cb2-44" title="44"></a>
<a class="sourceLine" id="cb2-45" title="45"><span class="co"># Convert the labels to factors (and drop the unused levels)</span></a>
<a class="sourceLine" id="cb2-46" title="46">cps_data &lt;-<span class="st"> </span>cps_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-47" title="47"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">STATE_factor =</span> <span class="kw"><a href="https://forcats.tidyverse.org/reference/as_factor.html">as_factor</a></span>(<span class="kw"><a href="../reference/lbl_clean.html">lbl_clean</a></span>(STATEFIP)))</a>
<a class="sourceLine" id="cb2-48" title="48"></a>
<a class="sourceLine" id="cb2-49" title="49"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/table">table</a></span>(cps_data<span class="op">$</span>STATE_factor, <span class="dt">useNA =</span> <span class="st">"always"</span>)</a>
<a class="sourceLine" id="cb2-50" title="50"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-51" title="51"><span class="co">#&gt;         Iowa    Minnesota North Dakota South Dakota    Wisconsin </span></a>
<a class="sourceLine" id="cb2-52" title="52"><span class="co">#&gt;         1892         2362          188          227         2999 </span></a>
<a class="sourceLine" id="cb2-53" title="53"><span class="co">#&gt;         &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-54" title="54"><span class="co">#&gt;            0</span></a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># Manipulating the labelled value before as_factor </span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co"># often leads to losing the information...</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co"># Say we want to set Iowa (STATEFIP == 19) to missing</span></a>
<a class="sourceLine" id="cb3-4" title="4">cps_data &lt;-<span class="st"> </span>cps_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">STATE_factor2 =</span> <span class="kw"><a href="https://forcats.tidyverse.org/reference/as_factor.html">as_factor</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(STATEFIP <span class="op">==</span><span class="st"> </span><span class="dv">19</span>, <span class="ot">NA</span>, STATEFIP)))</a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; Error in mutate_impl(.data, dots): Evaluation error: no applicable method for 'as_factor' applied to an object of class "c('integer', 'numeric')".</span></a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># ipumsr provides helpers for these kinds of tasks, like lbl_na_if().</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co"># See the value-labels vignette for more information</span></a>
<a class="sourceLine" id="cb4-3" title="3">cps_data &lt;-<span class="st"> </span>cps_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">STATE_factor3 =</span> <span class="kw"><a href="https://forcats.tidyverse.org/reference/as_factor.html">as_factor</a></span>(<span class="kw"><a href="../reference/lbl_na_if.html">lbl_na_if</a></span>(STATEFIP, <span class="op">~</span>.val <span class="op">==</span><span class="st"> </span><span class="dv">19</span>)))</a>
<a class="sourceLine" id="cb4-5" title="5"></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co"># The as_factor function also has a "levels" argument that can </span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co"># put both the labels and values into the factor</span></a>
<a class="sourceLine" id="cb4-8" title="8">cps_data &lt;-<span class="st"> </span>cps_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">STATE_factor4 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/droplevels">droplevels</a></span>(<span class="kw"><a href="https://forcats.tidyverse.org/reference/as_factor.html">as_factor</a></span>(STATEFIP, <span class="dt">levels =</span> <span class="st">"both"</span>)))</a>
<a class="sourceLine" id="cb4-10" title="10"></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/table">table</a></span>(cps_data<span class="op">$</span>STATE_factor4, <span class="dt">useNA =</span> <span class="st">"always"</span>)</a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt;         [19] Iowa    [27] Minnesota [38] North Dakota [46] South Dakota </span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt;              1892              2362               188               227 </span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">#&gt;    [55] Wisconsin              &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">#&gt;              2999                 0</span></a></code></pre></div>
</div>
<div id="other-ipums-attributes" class="section level3">
<h3 class="hasAnchor">
<a href="#other-ipums-attributes" class="anchor"></a>Other IPUMS attributes</h3>
<p>Similarly, the other attributes that <code>ipumsr</code> stores about the data are often lost during an analysis. One way to deal with this is to load the DDI or codebook in addition to the actual data using the functions <code><a href="../reference/read_ipums_ddi.html">read_ipums_ddi()</a></code> and <code><a href="../reference/read_ipums_codebook.html">read_ipums_codebook()</a></code>. This way, when you wish to refer to variable labels or other metadata, you can use the DDI object, which does not get modified during your analysis.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ipumsr)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr, <span class="dt">warn.conflicts =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co"># Note that you can pass in the loaded DDI into the `read_ipums_micro()`</span></a>
<a class="sourceLine" id="cb5-5" title="5">cps_ddi &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_ipums_ddi.html">read_ipums_ddi</a></span>(<span class="kw"><a href="../reference/ipums_example.html">ipums_example</a></span>(<span class="st">"cps_00006.xml"</span>))</a>
<a class="sourceLine" id="cb5-6" title="6">cps_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_ipums_micro.html">read_ipums_micro</a></span>(cps_ddi, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb5-7" title="7"></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co"># Currently variable description is available for year</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="kw"><a href="../reference/ipums_var_info.html">ipums_var_desc</a></span>(cps_data<span class="op">$</span>YEAR)</a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt; [1] "YEAR reports the year in which the survey was conducted.  YEARP is repeated on person records."</span></a>
<a class="sourceLine" id="cb5-11" title="11"></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co"># But after using ifelse it is gone</span></a>
<a class="sourceLine" id="cb5-13" title="13">cps_data &lt;-<span class="st"> </span>cps_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">YEAR =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(YEAR <span class="op">==</span><span class="st"> </span><span class="dv">1962</span>, <span class="dv">62</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb5-15" title="15"><span class="kw"><a href="../reference/ipums_var_info.html">ipums_var_desc</a></span>(cps_data<span class="op">$</span>YEAR)</a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt; [1] NA</span></a>
<a class="sourceLine" id="cb5-17" title="17"></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co"># So you can use the DDI</span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="kw"><a href="../reference/ipums_var_info.html">ipums_var_desc</a></span>(cps_ddi, <span class="st">"YEAR"</span>)</a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">#&gt; [1] "YEAR reports the year in which the survey was conducted.  YEARP is repeated on person records."</span></a>
<a class="sourceLine" id="cb5-21" title="21"></a>
<a class="sourceLine" id="cb5-22" title="22"><span class="co"># The DDI also has file level information that is not available from just</span></a>
<a class="sourceLine" id="cb5-23" title="23"><span class="co"># the data.</span></a>
<a class="sourceLine" id="cb5-24" title="24"><span class="kw"><a href="../reference/ipums_file_info.html">ipums_file_info</a></span>(cps_ddi, <span class="st">"extract_notes"</span>)</a>
<a class="sourceLine" id="cb5-25" title="25"><span class="co">#&gt; [1] "User-provided description:  Minimal test extract\nSamples: 1962, 1963\nVariables: STATEFIP, INCTOT (automatically Year, SERIAL, HWTSUPP, MONTH, WTSUPP)\nSelect Cases: State - Minnesota, Iowa, Wisconsin, South Dakota, North Dakota"</span></a></code></pre></div>
</div>
<div id="dplyr-select-style-syntax" class="section level3">
<h3 class="hasAnchor">
<a href="#dplyr-select-style-syntax" class="anchor"></a>“dplyr select-style” Syntax</h3>
<p>Several functions within the <code>ipumsr</code> package allow for “dplyr select-style” syntax. This means that they accept either a character vector of values (eg <code><a href="https://www.rdocumentation.org/packages/base/topics/c">c("YEAR", "AGE")</a></code>), bare vectors of values (eg <code><a href="https://www.rdocumentation.org/packages/base/topics/c">c(YEAR, AGE)</a></code>) and the helper functions allowed in <code><a href="https://dplyr.tidyverse.org/reference/select.html">dplyr::select()</a></code> (eg <code><a href="https://www.rdocumentation.org/packages/tidyselect/topics/select_helpers">one_of(c("YEAR", "AGE"))</a></code>).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ipumsr)</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr, <span class="dt">warn.conflicts =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co"># The vars argument for `read_ipums_micro` uses this syntax</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co"># So these are all equivalent</span></a>
<a class="sourceLine" id="cb6-6" title="6">cf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ipums_example.html">ipums_example</a></span>(<span class="st">"cps_00006.xml"</span>)</a>
<a class="sourceLine" id="cb6-7" title="7"><span class="kw"><a href="../reference/read_ipums_micro.html">read_ipums_micro</a></span>(cf, <span class="dt">vars =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"YEAR"</span>, <span class="st">"INCTOT"</span>), <span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>()</a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co">#&gt; [1] "YEAR"   "INCTOT"</span></a>
<a class="sourceLine" id="cb6-10" title="10"></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="kw"><a href="../reference/read_ipums_micro.html">read_ipums_micro</a></span>(cf, <span class="dt">vars =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(YEAR, INCTOT), <span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>()</a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">#&gt; [1] "YEAR"   "INCTOT"</span></a>
<a class="sourceLine" id="cb6-14" title="14"></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="kw"><a href="../reference/read_ipums_micro.html">read_ipums_micro</a></span>(cf, <span class="dt">vars =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/tidyselect/topics/select_helpers">one_of</a></span>(<span class="st">"YEAR"</span>), <span class="kw"><a href="https://www.rdocumentation.org/packages/tidyselect/topics/select_helpers">starts_with</a></span>(<span class="st">"INC"</span>)), <span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>()</a>
<a class="sourceLine" id="cb6-17" title="17"><span class="co">#&gt; [1] "YEAR"   "INCTOT"</span></a>
<a class="sourceLine" id="cb6-18" title="18"></a>
<a class="sourceLine" id="cb6-19" title="19"><span class="co"># `data_layer` and `shape_layer` arguments to `read_nhgis()` and terra functions</span></a>
<a class="sourceLine" id="cb6-20" title="20"><span class="co"># also use it.</span></a>
<a class="sourceLine" id="cb6-21" title="21"><span class="co"># (Sometimes extracts have multiple files, though all examples only have one)</span></a>
<a class="sourceLine" id="cb6-22" title="22">nf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ipums_example.html">ipums_example</a></span>(<span class="st">"nhgis0008_csv.zip"</span>)</a>
<a class="sourceLine" id="cb6-23" title="23"><span class="kw"><a href="../reference/ipums_list_files.html">ipums_list_files</a></span>(nf)</a>
<a class="sourceLine" id="cb6-24" title="24"><span class="co">#&gt; # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb6-25" title="25"><span class="co">#&gt;   type  file                                       </span></a>
<a class="sourceLine" id="cb6-26" title="26"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;                                      </span></a>
<a class="sourceLine" id="cb6-27" title="27"><span class="co">#&gt; 1 data  nhgis0008_csv/nhgis0008_ds135_1990_pmsa.csv</span></a>
<a class="sourceLine" id="cb6-28" title="28"></a>
<a class="sourceLine" id="cb6-29" title="29"><span class="kw"><a href="../reference/ipums_list_files.html">ipums_list_files</a></span>(nf, <span class="dt">data_layer =</span> <span class="st">"nhgis0008_csv/nhgis0008_ds135_1990_pmsa.csv"</span>)</a>
<a class="sourceLine" id="cb6-30" title="30"><span class="co">#&gt; # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb6-31" title="31"><span class="co">#&gt;   type  file                                       </span></a>
<a class="sourceLine" id="cb6-32" title="32"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;                                      </span></a>
<a class="sourceLine" id="cb6-33" title="33"><span class="co">#&gt; 1 data  nhgis0008_csv/nhgis0008_ds135_1990_pmsa.csv</span></a>
<a class="sourceLine" id="cb6-34" title="34"></a>
<a class="sourceLine" id="cb6-35" title="35"><span class="kw"><a href="../reference/ipums_list_files.html">ipums_list_files</a></span>(nf, <span class="dt">data_layer =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/tidyselect/topics/select_helpers">contains</a></span>(<span class="st">"ds135"</span>))</a>
<a class="sourceLine" id="cb6-36" title="36"><span class="co">#&gt; # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb6-37" title="37"><span class="co">#&gt;   type  file                                       </span></a>
<a class="sourceLine" id="cb6-38" title="38"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;                                      </span></a>
<a class="sourceLine" id="cb6-39" title="39"><span class="co">#&gt; 1 data  nhgis0008_csv/nhgis0008_ds135_1990_pmsa.csv</span></a></code></pre></div>
</div>
<div id="hierarchical-data-structures" class="section level3">
<h3 class="hasAnchor">
<a href="#hierarchical-data-structures" class="anchor"></a>Hierarchical data structures</h3>
<p>For certain IPUMS projects, the data is hierarchical, multiple people are included in a single household, or multiple activities are performed by a single person. The <code>ipumsr</code> package provides two data structures for storing such data (for users who did not select the “rectangularize” option on the website). The data can be loaded as a <code>"list"</code> or <code>"long"</code>.</p>
<p><strong>List</strong> data loads each record type into a separate data.frame. The names of the recordtype data.frames are the value of the RECTYPE variable (eg “H” and “P”). Use the function <code><a href="../reference/read_ipums_micro.html">read_ipums_micro_list()</a></code> to load the data this way.</p>
<p><strong>Long</strong> data has one row per unit, regardless of what type of record the unit is. Therefore, datasets loaded this way often contain variables with a large number of missings, for the variables that only apply to certain record types. Use the function <code><a href="../reference/read_ipums_micro.html">read_ipums_micro()</a></code> to load the data this way.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ipumsr)</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr, <span class="dt">warn.conflicts =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co"># List data</span></a>
<a class="sourceLine" id="cb7-5" title="5">cps &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_ipums_micro.html">read_ipums_micro_list</a></span>(</a>
<a class="sourceLine" id="cb7-6" title="6">  <span class="kw"><a href="../reference/ipums_example.html">ipums_example</a></span>(<span class="st">"cps_00010.xml"</span>),</a>
<a class="sourceLine" id="cb7-7" title="7">  <span class="dt">verbose =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb7-8" title="8">)</a>
<a class="sourceLine" id="cb7-9" title="9"></a>
<a class="sourceLine" id="cb7-10" title="10">cps<span class="op">$</span>PERSON</a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">#&gt; # A tibble: 7,668 x 6</span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">#&gt;    RECTYPE          YEAR SERIAL PERNUM WTSUPP INCTOT                       </span></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="co">#&gt;    &lt;chr+lbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl+lbl&gt;                    </span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="co">#&gt;  1 P [Person Reco~  1962     80      1  1476.     4883                     </span></a>
<a class="sourceLine" id="cb7-15" title="15"><span class="co">#&gt;  2 P [Person Reco~  1962     80      2  1471.     5800                     </span></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="co">#&gt;  3 P [Person Reco~  1962     80      3  1579. 99999998 [Missing.]          </span></a>
<a class="sourceLine" id="cb7-17" title="17"><span class="co">#&gt;  4 P [Person Reco~  1962     82      1  1598.    14015                     </span></a>
<a class="sourceLine" id="cb7-18" title="18"><span class="co">#&gt;  5 P [Person Reco~  1962     83      1  1707.    16552                     </span></a>
<a class="sourceLine" id="cb7-19" title="19"><span class="co">#&gt;  6 P [Person Reco~  1962     84      1  1790.     6375                     </span></a>
<a class="sourceLine" id="cb7-20" title="20"><span class="co">#&gt;  7 P [Person Reco~  1962    107      1  4355. 99999999 [N.I.U. (Not in Uni~</span></a>
<a class="sourceLine" id="cb7-21" title="21"><span class="co">#&gt;  8 P [Person Reco~  1962    107      2  1386.        0                     </span></a>
<a class="sourceLine" id="cb7-22" title="22"><span class="co">#&gt;  9 P [Person Reco~  1962    107      3  1629.      600                     </span></a>
<a class="sourceLine" id="cb7-23" title="23"><span class="co">#&gt; 10 P [Person Reco~  1962    107      4  1432. 99999999 [N.I.U. (Not in Uni~</span></a>
<a class="sourceLine" id="cb7-24" title="24"><span class="co">#&gt; # ... with 7,658 more rows</span></a>
<a class="sourceLine" id="cb7-25" title="25"></a>
<a class="sourceLine" id="cb7-26" title="26">cps<span class="op">$</span>HOUSEHOLD</a>
<a class="sourceLine" id="cb7-27" title="27"><span class="co">#&gt; # A tibble: 3,385 x 6</span></a>
<a class="sourceLine" id="cb7-28" title="28"><span class="co">#&gt;    RECTYPE               YEAR SERIAL HWTSUPP STATEFIP       MONTH    </span></a>
<a class="sourceLine" id="cb7-29" title="29"><span class="co">#&gt;    &lt;chr+lbl&gt;            &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;int+lbl&gt;      &lt;int+lbl&gt;</span></a>
<a class="sourceLine" id="cb7-30" title="30"><span class="co">#&gt;  1 H [Household Record]  1962     80   1476. 55 [Wisconsin] 3 [March]</span></a>
<a class="sourceLine" id="cb7-31" title="31"><span class="co">#&gt;  2 H [Household Record]  1962     82   1598. 27 [Minnesota] 3 [March]</span></a>
<a class="sourceLine" id="cb7-32" title="32"><span class="co">#&gt;  3 H [Household Record]  1962     83   1707. 27 [Minnesota] 3 [March]</span></a>
<a class="sourceLine" id="cb7-33" title="33"><span class="co">#&gt;  4 H [Household Record]  1962     84   1790. 27 [Minnesota] 3 [March]</span></a>
<a class="sourceLine" id="cb7-34" title="34"><span class="co">#&gt;  5 H [Household Record]  1962    107   4355. 19 [Iowa]      3 [March]</span></a>
<a class="sourceLine" id="cb7-35" title="35"><span class="co">#&gt;  6 H [Household Record]  1962    108   1479. 19 [Iowa]      3 [March]</span></a>
<a class="sourceLine" id="cb7-36" title="36"><span class="co">#&gt;  7 H [Household Record]  1962    122   3603. 27 [Minnesota] 3 [March]</span></a>
<a class="sourceLine" id="cb7-37" title="37"><span class="co">#&gt;  8 H [Household Record]  1962    124   4104. 55 [Wisconsin] 3 [March]</span></a>
<a class="sourceLine" id="cb7-38" title="38"><span class="co">#&gt;  9 H [Household Record]  1962    125   2182. 55 [Wisconsin] 3 [March]</span></a>
<a class="sourceLine" id="cb7-39" title="39"><span class="co">#&gt; 10 H [Household Record]  1962    126   1826. 55 [Wisconsin] 3 [March]</span></a>
<a class="sourceLine" id="cb7-40" title="40"><span class="co">#&gt; # ... with 3,375 more rows</span></a>
<a class="sourceLine" id="cb7-41" title="41"></a>
<a class="sourceLine" id="cb7-42" title="42"><span class="co"># Long data</span></a>
<a class="sourceLine" id="cb7-43" title="43">cps &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_ipums_micro.html">read_ipums_micro</a></span>(</a>
<a class="sourceLine" id="cb7-44" title="44">  <span class="kw"><a href="../reference/ipums_example.html">ipums_example</a></span>(<span class="st">"cps_00010.xml"</span>),</a>
<a class="sourceLine" id="cb7-45" title="45">  <span class="dt">verbose =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb7-46" title="46">)</a>
<a class="sourceLine" id="cb7-47" title="47"></a>
<a class="sourceLine" id="cb7-48" title="48">cps</a>
<a class="sourceLine" id="cb7-49" title="49"><span class="co">#&gt; # A tibble: 11,053 x 9</span></a>
<a class="sourceLine" id="cb7-50" title="50"><span class="co">#&gt;    RECTYPE  YEAR SERIAL HWTSUPP STATEFIP MONTH    PERNUM WTSUPP</span></a>
<a class="sourceLine" id="cb7-51" title="51"><span class="co">#&gt;    &lt;chr+l&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;int+lb&gt; &lt;int+lb&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb7-52" title="52"><span class="co">#&gt;  1 H [Hou~  1962     80   1476. 55 [Wis~  3 [Mar~     NA    NA </span></a>
<a class="sourceLine" id="cb7-53" title="53"><span class="co">#&gt;  2 P [Per~  1962     80     NA  NA       NA            1  1476.</span></a>
<a class="sourceLine" id="cb7-54" title="54"><span class="co">#&gt;  3 P [Per~  1962     80     NA  NA       NA            2  1471.</span></a>
<a class="sourceLine" id="cb7-55" title="55"><span class="co">#&gt;  4 P [Per~  1962     80     NA  NA       NA            3  1579.</span></a>
<a class="sourceLine" id="cb7-56" title="56"><span class="co">#&gt;  5 H [Hou~  1962     82   1598. 27 [Min~  3 [Mar~     NA    NA </span></a>
<a class="sourceLine" id="cb7-57" title="57"><span class="co">#&gt;  6 P [Per~  1962     82     NA  NA       NA            1  1598.</span></a>
<a class="sourceLine" id="cb7-58" title="58"><span class="co">#&gt;  7 H [Hou~  1962     83   1707. 27 [Min~  3 [Mar~     NA    NA </span></a>
<a class="sourceLine" id="cb7-59" title="59"><span class="co">#&gt;  8 P [Per~  1962     83     NA  NA       NA            1  1707.</span></a>
<a class="sourceLine" id="cb7-60" title="60"><span class="co">#&gt;  9 H [Hou~  1962     84   1790. 27 [Min~  3 [Mar~     NA    NA </span></a>
<a class="sourceLine" id="cb7-61" title="61"><span class="co">#&gt; 10 P [Per~  1962     84     NA  NA       NA            1  1790.</span></a>
<a class="sourceLine" id="cb7-62" title="62"><span class="co">#&gt; # ... with 11,043 more rows, and 1 more variable: INCTOT &lt;dbl+lbl&gt;</span></a></code></pre></div>
</div>
<div id="geospatial-packages-sf-vs-sp" class="section level3">
<h3 class="hasAnchor">
<a href="#geospatial-packages-sf-vs-sp" class="anchor"></a>Geospatial Packages: <code>sf</code> vs <code>sp</code>
</h3>
<p>The <code>ipumsr</code> package allows for loading geospatial data in two formats (sf for Simple Features and sp for Spatial). The <code>sf</code> package is relatively new, and so does not have as widespread support as the <code>sp</code> package. However, (in my opinion) it does allow for easier analysis, and so may be a better place to start if you have not used GIS data in R before.</p>
<p>For more details about how to load geographic data using ipumsr, see the vignette “ipums-geography” (<code><a href="../articles/ipums-geography.html">vignette("ipums-geography", package = "ipumsr")</a></code>)</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#basics">Basics</a><ul class="nav nav-pills nav-stacked">
<li><a href="#getting-data-from-the-ipums-website">Getting Data from the IPUMS website</a></li>
      <li><a href="#import-functions">Import Functions</a></li>
      <li><a href="#metadata-functions">Metadata Functions</a></li>
      <li><a href="#grab-bag">Grab Bag</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://www.ipums.org">IPUMS</a> at the University of Minnesota.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '4ffa912ace97d2493f6ed39f20e94316',
    indexName: 'ipumsr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
