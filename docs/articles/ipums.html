<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to `ipumsr` - IPUMS Data in R • ipumsr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Introduction to `ipumsr` - IPUMS Data in R">
<meta property="og:description" content="ipumsr">
<meta property="og:image" content="http://tech.popdata.org/ipumsr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ipumsr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ipums.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ipums.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/value-labels.html">Value labels</a>
    </li>
    <li>
      <a href="../articles/ipums-geography.html">Geographic data in ipumsr</a>
    </li>
    <li>
      <a href="../articles/ipums-bigdata.html">Big IPUMS data</a>
    </li>
    <li>
      <a href="../articles/ipums-api.html">IPUMS data extract API</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="../articles/ipums-cps.html">CPS exercise</a>
    </li>
    <li>
      <a href="../articles/ipums-nhgis.html">NHGIS exercise</a>
    </li>
    <li>
      <a href="../articles/ipums-terra.html">IPUMS Terra exercise</a>
    </li>
    <li>
      <a href="https://ipums.org/exercises.shtml" class="external-link">More project exercises</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ipums/ipumsr" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://forum.ipums.org" class="external-link">
    <span class="fa fa-users"></span>
     
  </a>
</li>
<li>
  <a href="https://www.ipums.org/" class="external-link">
    <span class="fa fa-globe"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to <code>ipumsr</code> - IPUMS Data
in R</h1>
                        <h4 data-toc-skip class="author">Minnesota
Population Center</h4>
            
            <h4 data-toc-skip class="date">2022-06-03</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ipums/ipumsr/blob/HEAD/vignettes/ipums.Rmd" class="external-link"><code>vignettes/ipums.Rmd</code></a></small>
      <div class="hidden name"><code>ipums.Rmd</code></div>

    </div>

    
    
<p>The <code>ipumsr</code> package allows you to read data from your
IPUMS extract into R along with the associated metadata like variable
labels, value labels and more. IPUMS is a great source of international
census and survey data.</p>
<blockquote>
<p>IPUMS provides census and survey data from around the world
integrated across time and space. IPUMS integration and documentation
makes it easy to study change, conduct comparative research, merge
information across data types, and analyze individuals within family and
community context. Data and services are available free of charge.</p>
</blockquote>
<p>Learn more here: <a href="https://www.ipums.org/mission-purpose" class="external-link uri">https://www.ipums.org/mission-purpose</a></p>
<div class="section level2">
<h2 id="additional-vignettes">Additional Vignettes<a class="anchor" aria-label="anchor" href="#additional-vignettes"></a>
</h2>
<p>This vignette gives the basic outline of the <code>ipumsr</code>
package. Additional vignettes provide guidance on working with IPUMS
value labels, IPUMS geographic data, and data from three specific IPUMS
projects – CPS, NHGIS, and Terra.</p>
<p>To view any of these additional vignettes, run one the following
commands after installing the <code>ipumsr</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"value-labels"</span>, package <span class="op">=</span> <span class="st">"ipumsr"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"ipums-geography"</span>, package <span class="op">=</span> <span class="st">"ipumsr"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"ipums-cps"</span>, package <span class="op">=</span> <span class="st">"ipumsr"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"ipums-nhgis"</span>, package <span class="op">=</span> <span class="st">"ipumsr"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"ipums-terra"</span>, package <span class="op">=</span> <span class="st">"ipumsr"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-data-from-the-ipums-website">Getting Data from the IPUMS website<a class="anchor" aria-label="anchor" href="#getting-data-from-the-ipums-website"></a>
</h2>
<p>Registered users can download IPUMS data from our website at <a href="https://www.ipums.org" class="external-link uri">https://www.ipums.org</a>. The
website provides an interactive extract system that allows you to select
only the samples and variables that are relevant to your research
question.</p>
<p><strong>For microdata projects (all supported projects except NHGIS
and IPUMS Terra)</strong>, once you have created your extract, you
should choose to download your data in either a fixed-width text (.dat
file extension) or comma delimited (.csv file extension) format.</p>
<p>Once your extract is complete, download the data file and the DDI.
Downloading the DDI is a little bit different depending on your browser.
On most browsers you should right-click the file and select “Save As…”.
If this saves a file with a .xml file extension, then you should be
ready. However, Safari users must select “Download Linked File” instead
of “Download Linked File <strong>As</strong>”. On Safari, selecting the
wrong version of these two will download a file with a .html file
extension instead of a .xml extension.</p>
<div class="figure">
<img src="microdata_annotated_screenshot.png" width="700" alt=""><p class="caption">Annotated screenshot for downloading microdata (may
look different on your computer)</p>
</div>
<p><strong>For NHGIS</strong>, download the table data in a comma
delimited format, and, if you want the associated mapping data, the GIS
data. NHGIS provides the option to download comma-delimited files with
an extra header row; it does not matter which option you select.</p>
<p><strong>For IPUMS Terra</strong>, download the .zip extract
“bundles”. If you want the associated mapping data, select the “include
boundary files” option. You do not need to unzip the data.</p>
</div>
<div class="section level2">
<h2 id="import-functions">Import Functions<a class="anchor" aria-label="anchor" href="#import-functions"></a>
</h2>
<p>Once your extract is downloaded, the <code>ipumsr</code> package
functions <code>read_*()</code> help you load the data into R.</p>
<ul>
<li>
<code><a href="../reference/read_ipums_micro.html">read_ipums_micro()</a></code> /
<code><a href="../reference/read_ipums_micro.html">read_ipums_micro_list()</a></code>: Reads data from microdata projects
(USA, CPS, International, DHS, Time Use, Health Surveys and Higher
Ed)</li>
<li>
<code><a href="../reference/read_nhgis.html">read_nhgis()</a></code> / <code><a href="../reference/read_nhgis.html">read_nhgis_sf()</a></code> /
<code><a href="../reference/read_nhgis.html">read_nhgis_sp()</a></code>: Reads data from the NHGIS project.
<code>read_nhgis</code> loads only tabular data, whereas
<code><a href="../reference/read_nhgis.html">read_nhgis_sf()</a></code> and <code><a href="../reference/read_nhgis.html">read_nhgis_sp()</a></code> load
tabular data and shapefiles.</li>
<li>
<code><a href="../reference/read_terra_micro.html">read_terra_micro()</a></code>, <code>read_terra_micro_sf()</code>,
<code>read_terra_micro_sp()</code>, <code><a href="../reference/read_terra_area.html">read_terra_area()</a></code> and
<code><a href="../reference/read_terra_raster.html">read_terra_raster()</a></code> load data form the IPUMS Terra
project.</li>
<li>
<code><a href="../reference/read_ipums_sf.html">read_ipums_sf()</a></code> and <code><a href="../reference/read_ipums_sf.html">read_ipums_sp()</a></code> load
boundary files.</li>
<li>
<code><a href="../reference/read_ipums_ddi.html">read_ipums_ddi()</a></code>: Reads DDI files with metadata that
are included with some extracts (mainly microdata)</li>
<li>
<code><a href="../reference/read_ipums_codebook.html">read_ipums_codebook()</a></code>: Reads the text codebook included
with some extracts (mainly NHGIS and some TerraPop extracts)</li>
</ul>
</div>
<div class="section level2">
<h2 id="metadata-functions">Metadata Functions<a class="anchor" aria-label="anchor" href="#metadata-functions"></a>
</h2>
<p>Once the data is in R, you can view information about the extract
using the metadata functions.</p>
<ul>
<li>
<code><a href="../reference/ipums_view.html">ipums_view()</a></code>: Makes a webpage that displays in the
RStudio Viewer which provides information about the extract as a whole
(like your extract notes or the citation information) and the specific
variables included (like the variable label, description and value
labels).</li>
<li>
<code><a href="../reference/ipums_file_info.html">ipums_file_info()</a></code>: Returns the file-level metadata
contained in <code><a href="../reference/ipums_view.html">ipums_view()</a></code> as an R data structure.</li>
<li>
<code><a href="../reference/ipums_var_info.html">ipums_var_info()</a></code>: Returns the variable-level metadata
contained in <code><a href="../reference/ipums_view.html">ipums_view()</a></code> as an R data structure.</li>
</ul>
</div>
<div class="section level2">
<h2 id="grab-bag">Grab Bag<a class="anchor" aria-label="anchor" href="#grab-bag"></a>
</h2>
<div class="section level3">
<h3 id="survey-weights">Survey Weights<a class="anchor" aria-label="anchor" href="#survey-weights"></a>
</h3>
<p>The data from most IPUMS projects contain some form of weighting
variable that should be used to calculate estimates that are
representative of the whole population. Many projects also provide
specifications to help estimate variance given the complex design of the
survey, such as replicate weights or design variables like STRATUM and
PSU. The <a href="https://cran.r-project.org/package=survey" class="external-link">survey
package</a> provides functions that allow you to estimate variance
taking this into account, and the <a href="https://cran.r-project.org/package=srvyr" class="external-link">srvyr package</a>
implements dplyr-like syntax for survey analysis, using the survey
package’s functions.</p>
<p>For more information about what these variables mean and how to use
them, see the website for the project you are interested in.</p>
</div>
<div class="section level3">
<h3 id="non-extract-data">Non-Extract Data<a class="anchor" aria-label="anchor" href="#non-extract-data"></a>
</h3>
<p>Some projects have data that is not contained within the extract
system, such that no DDI is provided for this data. In this case, either
use the comma delimited file (.csv file extension) if available, or use
the <code>haven</code> package to read one of the files intended for
another statistical software (like Stata, SAS or SPSS).</p>
</div>
<div class="section level3">
<h3 id="value-labels">Value Labels<a class="anchor" aria-label="anchor" href="#value-labels"></a>
</h3>
<p>The way that IPUMS treats value labels does not align with factors
(the main way that R is able to store values associated with labels).
R’s <code>factor</code> variables can only store values as an integer
sequence (1, 2, 3, …), but IPUMS conventions are to store missing and
not-in-universe codes as large numbers, to distinguish them from the
normal values.</p>
<p>Therefore, the <code>ipumsr</code> package uses the
<code>labelled</code> class from the <code>haven</code> package to store
labelled values. See the “value-labels” vignette for more information
(<code><a href="../articles/value-labels.html">vignette('value-labels')</a></code>).</p>
<p>If you want to use IPUMS value labels attached to a variable, it is
generally best to convert from the <code>labelled</code> class to
<code>factor</code> early on in your data analysis workflow. This is
because many data manipulation functions will drop the labels stored in
a variable with class <code>labelled</code>. The function
<code><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor()</a></code> is the main function to create factors from
labels, but often you will need to do more manipulation before that.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.ipums.org" class="external-link">ipumsr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># Note that you can pass in the loaded DDI into the `read_ipums_micro()`</span>
<span class="va">cps_ddi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_ipums_ddi.html">read_ipums_ddi</a></span><span class="op">(</span><span class="fu"><a href="../reference/ipums_example.html">ipums_example</a></span><span class="op">(</span><span class="st">"cps_00006.xml"</span><span class="op">)</span><span class="op">)</span>
<span class="va">cps_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_ipums_micro.html">read_ipums_micro</a></span><span class="op">(</span><span class="va">cps_ddi</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># Show which variables have labels</span>
<span class="va">cps_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">select_if</a></span><span class="op">(</span><span class="va">is.labelled</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,668 × 3</span></span>
<span class="co">#&gt;          STATEFIP     MONTH                               INCTOT</span>
<span class="co">#&gt;         <span style="color: #949494; font-style: italic;">&lt;int+lbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int+lbl&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 55<span style="color: #949494;"> [Wisconsin]</span> 3<span style="color: #949494;"> [March]</span>     <span style="text-decoration: underline;">4</span>883                            </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 55<span style="color: #949494;"> [Wisconsin]</span> 3<span style="color: #949494;"> [March]</span>     <span style="text-decoration: underline;">5</span>800                            </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 55<span style="color: #949494;"> [Wisconsin]</span> 3<span style="color: #949494;"> [March]</span> 99<span style="text-decoration: underline;">999</span>998<span style="color: #949494;"> [Missing.]</span>                 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 27<span style="color: #949494;"> [Minnesota]</span> 3<span style="color: #949494;"> [March]</span>    <span style="text-decoration: underline;">14</span>015                            </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 27<span style="color: #949494;"> [Minnesota]</span> 3<span style="color: #949494;"> [March]</span>    <span style="text-decoration: underline;">16</span>552                            </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 27<span style="color: #949494;"> [Minnesota]</span> 3<span style="color: #949494;"> [March]</span>     <span style="text-decoration: underline;">6</span>375                            </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 19<span style="color: #949494;"> [Iowa]</span>      3<span style="color: #949494;"> [March]</span> 99<span style="text-decoration: underline;">999</span>999<span style="color: #949494;"> [N.I.U. (Not in Universe).]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 19<span style="color: #949494;"> [Iowa]</span>      3<span style="color: #949494;"> [March]</span>        0                            </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 19<span style="color: #949494;"> [Iowa]</span>      3<span style="color: #949494;"> [March]</span>      600                            </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 19<span style="color: #949494;"> [Iowa]</span>      3<span style="color: #949494;"> [March]</span> 99<span style="text-decoration: underline;">999</span>999<span style="color: #949494;"> [N.I.U. (Not in Universe).]</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,658 more rows</span></span>

<span class="co"># Notice how the tibble print function shows the dbl+lbl class on top</span>

<span class="co"># Investigate labels</span>
<span class="fu"><a href="../reference/ipums_var_info.html">ipums_val_labels</a></span><span class="op">(</span><span class="va">cps_data</span><span class="op">$</span><span class="va">STATEFIP</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 75 × 2</span></span>
<span class="co">#&gt;      val lbl                 </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1 Alabama             </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2 Alaska              </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     4 Arizona             </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     5 Arkansas            </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     6 California          </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     8 Colorado            </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     9 Connecticut         </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    10 Delaware            </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    11 District of Columbia</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    12 Florida             </span>
<span class="co">#&gt; <span style="color: #949494;"># … with 65 more rows</span></span>

<span class="co"># Convert the labels to factors (and drop the unused levels)</span>
<span class="va">cps_data</span> <span class="op">&lt;-</span> <span class="va">cps_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>STATE_factor <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="fu"><a href="../reference/lbl_clean.html">lbl_clean</a></span><span class="op">(</span><span class="va">STATEFIP</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">cps_data</span><span class="op">$</span><span class="va">STATE_factor</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;         Iowa    Minnesota North Dakota South Dakota    Wisconsin         &lt;NA&gt; </span>
<span class="co">#&gt;         1892         2362          188          227         2999            0</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Manipulating the labelled value before as_factor </span>
<span class="co"># often leads to losing the information...</span>
<span class="co"># Say we want to set Iowa (STATEFIP == 19) to missing</span>
<span class="va">cps_data</span> <span class="op">&lt;-</span> <span class="va">cps_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>STATE_factor2 <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">STATEFIP</span> <span class="op">==</span> <span class="fl">19</span>, <span class="cn">NA</span>, <span class="va">STATEFIP</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ipumsr provides helpers for these kinds of tasks, like lbl_na_if().</span>
<span class="co"># See the value-labels vignette for more information</span>
<span class="va">cps_data</span> <span class="op">&lt;-</span> <span class="va">cps_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>STATE_factor3 <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="fu"><a href="../reference/lbl_na_if.html">lbl_na_if</a></span><span class="op">(</span><span class="va">STATEFIP</span>, <span class="op">~</span><span class="va">.val</span> <span class="op">==</span> <span class="fl">19</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="co"># The as_factor function also has a "levels" argument that can </span>
<span class="co"># put both the labels and values into the factor</span>
<span class="va">cps_data</span> <span class="op">&lt;-</span> <span class="va">cps_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>STATE_factor4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">STATEFIP</span>, levels <span class="op">=</span> <span class="st">"both"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">cps_data</span><span class="op">$</span><span class="va">STATE_factor4</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;         [19] Iowa    [27] Minnesota [38] North Dakota [46] South Dakota </span>
<span class="co">#&gt;              1892              2362               188               227 </span>
<span class="co">#&gt;    [55] Wisconsin              &lt;NA&gt; </span>
<span class="co">#&gt;              2999                 0</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="other-ipums-attributes">Other IPUMS attributes<a class="anchor" aria-label="anchor" href="#other-ipums-attributes"></a>
</h3>
<p>As with value labels, the other attributes that <code>ipumsr</code>
stores about the data are often lost during an analysis. One way to deal
with this is to load the DDI or codebook in addition to the actual data
using the functions <code><a href="../reference/read_ipums_ddi.html">read_ipums_ddi()</a></code> and
<code><a href="../reference/read_ipums_codebook.html">read_ipums_codebook()</a></code>. This way, when you wish to refer to
variable labels or other metadata, you can use the DDI object, which
does not get modified during your analysis.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.ipums.org" class="external-link">ipumsr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># Note that you can pass in the loaded DDI into the `read_ipums_micro()`</span>
<span class="va">cps_ddi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_ipums_ddi.html">read_ipums_ddi</a></span><span class="op">(</span><span class="fu"><a href="../reference/ipums_example.html">ipums_example</a></span><span class="op">(</span><span class="st">"cps_00006.xml"</span><span class="op">)</span><span class="op">)</span>
<span class="va">cps_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_ipums_micro.html">read_ipums_micro</a></span><span class="op">(</span><span class="va">cps_ddi</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># Currently variable description is available for year</span>
<span class="fu"><a href="../reference/ipums_var_info.html">ipums_var_desc</a></span><span class="op">(</span><span class="va">cps_data</span><span class="op">$</span><span class="va">YEAR</span><span class="op">)</span>
<span class="co">#&gt; [1] "YEAR reports the year in which the survey was conducted.  YEARP is repeated on person records."</span>

<span class="co"># But after using ifelse it is gone</span>
<span class="va">cps_data</span> <span class="op">&lt;-</span> <span class="va">cps_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>YEAR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">YEAR</span> <span class="op">==</span> <span class="fl">1962</span>, <span class="fl">62</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/ipums_var_info.html">ipums_var_desc</a></span><span class="op">(</span><span class="va">cps_data</span><span class="op">$</span><span class="va">YEAR</span><span class="op">)</span>
<span class="co">#&gt; [1] NA</span>

<span class="co"># So you can use the DDI</span>
<span class="fu"><a href="../reference/ipums_var_info.html">ipums_var_desc</a></span><span class="op">(</span><span class="va">cps_ddi</span>, <span class="st">"YEAR"</span><span class="op">)</span>
<span class="co">#&gt; [1] "YEAR reports the year in which the survey was conducted.  YEARP is repeated on person records."</span>

<span class="co"># The DDI also has file level information that is not available from just</span>
<span class="co"># the data.</span>
<span class="fu"><a href="../reference/ipums_file_info.html">ipums_file_info</a></span><span class="op">(</span><span class="va">cps_ddi</span>, <span class="st">"extract_notes"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; User-provided description:  Minimal test extract</span>
<span class="co">#&gt; Samples: 1962, 1963</span>
<span class="co">#&gt; Variables: STATEFIP, INCTOT (automatically Year, SERIAL, HWTSUPP, MONTH, WTSUPP)</span>
<span class="co">#&gt; Select Cases: State - Minnesota, Iowa, Wisconsin, South Dakota, North Dakota</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="dplyr-select-style-syntax">“dplyr select-style” Syntax<a class="anchor" aria-label="anchor" href="#dplyr-select-style-syntax"></a>
</h3>
<p>Several functions within the <code>ipumsr</code> package allow for
“dplyr select-style” syntax. This means that they accept either a
character vector of values (e.g. <code>c("YEAR", "AGE")</code>), bare
vectors of values (e.g. <code>c(YEAR, AGE)</code>) and the helper
functions allowed in <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">dplyr::select()</a></code>
(e.g. <code>one_of(c("YEAR", "AGE"))</code>).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.ipums.org" class="external-link">ipumsr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># The vars argument for `read_ipums_micro` uses this syntax</span>
<span class="co"># So these are all equivalent</span>
<span class="va">cf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ipums_example.html">ipums_example</a></span><span class="op">(</span><span class="st">"cps_00006.xml"</span><span class="op">)</span>
<span class="fu"><a href="../reference/read_ipums_micro.html">read_ipums_micro</a></span><span class="op">(</span><span class="va">cf</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"YEAR"</span>, <span class="st">"INCTOT"</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "YEAR"   "INCTOT"</span>

<span class="fu"><a href="../reference/read_ipums_micro.html">read_ipums_micro</a></span><span class="op">(</span><span class="va">cf</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">YEAR</span>, <span class="va">INCTOT</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "YEAR"   "INCTOT"</span>

<span class="fu"><a href="../reference/read_ipums_micro.html">read_ipums_micro</a></span><span class="op">(</span><span class="va">cf</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span><span class="st">"YEAR"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"INC"</span><span class="op">)</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "YEAR"   "INCTOT"</span>

<span class="co"># `data_layer` and `shape_layer` arguments to `read_nhgis()` and terra functions</span>
<span class="co"># also use it.</span>
<span class="co"># (Sometimes extracts have multiple files, though all examples only have one)</span>
<span class="va">nf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ipums_example.html">ipums_example</a></span><span class="op">(</span><span class="st">"nhgis0008_csv.zip"</span><span class="op">)</span>
<span class="fu"><a href="../reference/ipums_list_files.html">ipums_list_files</a></span><span class="op">(</span><span class="va">nf</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 2</span></span>
<span class="co">#&gt;   type  file                                       </span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> data  nhgis0008_csv/nhgis0008_ds135_1990_pmsa.csv</span>

<span class="fu"><a href="../reference/ipums_list_files.html">ipums_list_files</a></span><span class="op">(</span><span class="va">nf</span>, data_layer <span class="op">=</span> <span class="st">"nhgis0008_csv/nhgis0008_ds135_1990_pmsa.csv"</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 2</span></span>
<span class="co">#&gt;   type  file                                       </span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> data  nhgis0008_csv/nhgis0008_ds135_1990_pmsa.csv</span>

<span class="fu"><a href="../reference/ipums_list_files.html">ipums_list_files</a></span><span class="op">(</span><span class="va">nf</span>, data_layer <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"ds135"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 2</span></span>
<span class="co">#&gt;   type  file                                       </span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> data  nhgis0008_csv/nhgis0008_ds135_1990_pmsa.csv</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="hierarchical-data-structures">Hierarchical data structures<a class="anchor" aria-label="anchor" href="#hierarchical-data-structures"></a>
</h3>
<p>For certain IPUMS projects, the data is hierarchical, multiple people
are included in a single household, or multiple activities are performed
by a single person. The <code>ipumsr</code> package provides two data
structures for storing such data (for users who did not select the
“rectangularize” option on the website). The data can be loaded as a
<code>"list"</code> or <code>"long"</code>.</p>
<p><strong>List</strong> data loads each record type into a separate
data.frame. The names of the recordtype data.frames are the value of the
RECTYPE variable (e.g. “H” and “P”). Use the function
<code><a href="../reference/read_ipums_micro.html">read_ipums_micro_list()</a></code> to load the data this way.</p>
<p><strong>Long</strong> data has one row per unit, regardless of what
type of record the unit is. Therefore, datasets loaded this way often
contain variables with a large number of missings, for the variables
that only apply to certain record types. Use the function
<code><a href="../reference/read_ipums_micro.html">read_ipums_micro()</a></code> to load the data this way.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.ipums.org" class="external-link">ipumsr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># List data</span>
<span class="va">cps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_ipums_micro.html">read_ipums_micro_list</a></span><span class="op">(</span>
  <span class="fu"><a href="../reference/ipums_example.html">ipums_example</a></span><span class="op">(</span><span class="st">"cps_00010.xml"</span><span class="op">)</span>,
  verbose <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="va">cps</span><span class="op">$</span><span class="va">PERSON</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,668 × 6</span></span>
<span class="co">#&gt;    RECTYPE            YEAR SERIAL PERNUM WTSUPP                           INCTOT</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr+lbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> P<span style="color: #949494;"> [Person Record]</span>  <span style="text-decoration: underline;">1</span>962     80      1  <span style="text-decoration: underline;">1</span>476.     <span style="text-decoration: underline;">4</span>883                        </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> P<span style="color: #949494;"> [Person Record]</span>  <span style="text-decoration: underline;">1</span>962     80      2  <span style="text-decoration: underline;">1</span>471.     <span style="text-decoration: underline;">5</span>800                        </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> P<span style="color: #949494;"> [Person Record]</span>  <span style="text-decoration: underline;">1</span>962     80      3  <span style="text-decoration: underline;">1</span>579. 99<span style="text-decoration: underline;">999</span>998<span style="color: #949494;"> [Missing.]</span>             </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> P<span style="color: #949494;"> [Person Record]</span>  <span style="text-decoration: underline;">1</span>962     82      1  <span style="text-decoration: underline;">1</span>598.    <span style="text-decoration: underline;">14</span>015                        </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> P<span style="color: #949494;"> [Person Record]</span>  <span style="text-decoration: underline;">1</span>962     83      1  <span style="text-decoration: underline;">1</span>707.    <span style="text-decoration: underline;">16</span>552                        </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> P<span style="color: #949494;"> [Person Record]</span>  <span style="text-decoration: underline;">1</span>962     84      1  <span style="text-decoration: underline;">1</span>790.     <span style="text-decoration: underline;">6</span>375                        </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> P<span style="color: #949494;"> [Person Record]</span>  <span style="text-decoration: underline;">1</span>962    107      1  <span style="text-decoration: underline;">4</span>355. 99<span style="text-decoration: underline;">999</span>999<span style="color: #949494;"> [N.I.U. (Not in Univer…</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> P<span style="color: #949494;"> [Person Record]</span>  <span style="text-decoration: underline;">1</span>962    107      2  <span style="text-decoration: underline;">1</span>386.        0                        </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> P<span style="color: #949494;"> [Person Record]</span>  <span style="text-decoration: underline;">1</span>962    107      3  <span style="text-decoration: underline;">1</span>629.      600                        </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> P<span style="color: #949494;"> [Person Record]</span>  <span style="text-decoration: underline;">1</span>962    107      4  <span style="text-decoration: underline;">1</span>432. 99<span style="text-decoration: underline;">999</span>999<span style="color: #949494;"> [N.I.U. (Not in Univer…</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,658 more rows</span></span>

<span class="va">cps</span><span class="op">$</span><span class="va">HOUSEHOLD</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,385 × 6</span></span>
<span class="co">#&gt;    RECTYPE               YEAR SERIAL HWTSUPP       STATEFIP     MONTH</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr+lbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int+lbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int+lbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> H<span style="color: #949494;"> [Household Record]</span>  <span style="text-decoration: underline;">1</span>962     80   <span style="text-decoration: underline;">1</span>476. 55<span style="color: #949494;"> [Wisconsin]</span> 3<span style="color: #949494;"> [March]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> H<span style="color: #949494;"> [Household Record]</span>  <span style="text-decoration: underline;">1</span>962     82   <span style="text-decoration: underline;">1</span>598. 27<span style="color: #949494;"> [Minnesota]</span> 3<span style="color: #949494;"> [March]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> H<span style="color: #949494;"> [Household Record]</span>  <span style="text-decoration: underline;">1</span>962     83   <span style="text-decoration: underline;">1</span>707. 27<span style="color: #949494;"> [Minnesota]</span> 3<span style="color: #949494;"> [March]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> H<span style="color: #949494;"> [Household Record]</span>  <span style="text-decoration: underline;">1</span>962     84   <span style="text-decoration: underline;">1</span>790. 27<span style="color: #949494;"> [Minnesota]</span> 3<span style="color: #949494;"> [March]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> H<span style="color: #949494;"> [Household Record]</span>  <span style="text-decoration: underline;">1</span>962    107   <span style="text-decoration: underline;">4</span>355. 19<span style="color: #949494;"> [Iowa]</span>      3<span style="color: #949494;"> [March]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> H<span style="color: #949494;"> [Household Record]</span>  <span style="text-decoration: underline;">1</span>962    108   <span style="text-decoration: underline;">1</span>479. 19<span style="color: #949494;"> [Iowa]</span>      3<span style="color: #949494;"> [March]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> H<span style="color: #949494;"> [Household Record]</span>  <span style="text-decoration: underline;">1</span>962    122   <span style="text-decoration: underline;">3</span>603. 27<span style="color: #949494;"> [Minnesota]</span> 3<span style="color: #949494;"> [March]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> H<span style="color: #949494;"> [Household Record]</span>  <span style="text-decoration: underline;">1</span>962    124   <span style="text-decoration: underline;">4</span>104. 55<span style="color: #949494;"> [Wisconsin]</span> 3<span style="color: #949494;"> [March]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> H<span style="color: #949494;"> [Household Record]</span>  <span style="text-decoration: underline;">1</span>962    125   <span style="text-decoration: underline;">2</span>182. 55<span style="color: #949494;"> [Wisconsin]</span> 3<span style="color: #949494;"> [March]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> H<span style="color: #949494;"> [Household Record]</span>  <span style="text-decoration: underline;">1</span>962    126   <span style="text-decoration: underline;">1</span>826. 55<span style="color: #949494;"> [Wisconsin]</span> 3<span style="color: #949494;"> [March]</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 3,375 more rows</span></span>

<span class="co"># Long data</span>
<span class="va">cps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_ipums_micro.html">read_ipums_micro</a></span><span class="op">(</span>
  <span class="fu"><a href="../reference/ipums_example.html">ipums_example</a></span><span class="op">(</span><span class="st">"cps_00010.xml"</span><span class="op">)</span>,
  verbose <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="va">cps</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 11,053 × 9</span></span>
<span class="co">#&gt;    RECTYPE     YEAR SERIAL HWTSUPP STATEFIP    MONTH PERNUM WTSUPP        INCTOT</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr+lbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int+lb&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int+lb&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> H<span style="color: #949494;"> [Househ…</span>  <span style="text-decoration: underline;">1</span>962     80   <span style="text-decoration: underline;">1</span>476. 55<span style="color: #949494;"> [Wis…</span>  3<span style="color: #949494;"> [Mar…</span>     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>           </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> P<span style="color: #949494;"> [Person…</span>  <span style="text-decoration: underline;">1</span>962     80     <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>            1  <span style="text-decoration: underline;">1</span>476.  4.88<span style="color: #949494;">e</span>3      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> P<span style="color: #949494;"> [Person…</span>  <span style="text-decoration: underline;">1</span>962     80     <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>            2  <span style="text-decoration: underline;">1</span>471.  5.8 <span style="color: #949494;">e</span>3      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> P<span style="color: #949494;"> [Person…</span>  <span style="text-decoration: underline;">1</span>962     80     <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>            3  <span style="text-decoration: underline;">1</span>579.  1.00<span style="color: #949494;">e</span>8<span style="color: #949494;"> [Mis…</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> H<span style="color: #949494;"> [Househ…</span>  <span style="text-decoration: underline;">1</span>962     82   <span style="text-decoration: underline;">1</span>598. 27<span style="color: #949494;"> [Min…</span>  3<span style="color: #949494;"> [Mar…</span>     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>           </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> P<span style="color: #949494;"> [Person…</span>  <span style="text-decoration: underline;">1</span>962     82     <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>            1  <span style="text-decoration: underline;">1</span>598.  1.40<span style="color: #949494;">e</span>4      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> H<span style="color: #949494;"> [Househ…</span>  <span style="text-decoration: underline;">1</span>962     83   <span style="text-decoration: underline;">1</span>707. 27<span style="color: #949494;"> [Min…</span>  3<span style="color: #949494;"> [Mar…</span>     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>           </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> P<span style="color: #949494;"> [Person…</span>  <span style="text-decoration: underline;">1</span>962     83     <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>            1  <span style="text-decoration: underline;">1</span>707.  1.66<span style="color: #949494;">e</span>4      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> H<span style="color: #949494;"> [Househ…</span>  <span style="text-decoration: underline;">1</span>962     84   <span style="text-decoration: underline;">1</span>790. 27<span style="color: #949494;"> [Min…</span>  3<span style="color: #949494;"> [Mar…</span>     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>           </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> P<span style="color: #949494;"> [Person…</span>  <span style="text-decoration: underline;">1</span>962     84     <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>            1  <span style="text-decoration: underline;">1</span>790.  6.38<span style="color: #949494;">e</span>3      </span>
<span class="co">#&gt; <span style="color: #949494;"># … with 11,043 more rows</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="geospatial-packages-sf-vs-sp">Geospatial Packages: <code>sf</code> vs <code>sp</code><a class="anchor" aria-label="anchor" href="#geospatial-packages-sf-vs-sp"></a>
</h3>
<p>The <code>ipumsr</code> package allows for loading geospatial data in
two formats (sf for Simple Features and sp for Spatial). The
<code>sf</code> package is relatively new, and so does not have as
widespread support as the <code>sp</code> package. However, (in my
opinion) it does allow for easier analysis, and so may be a better place
to start if you have not used GIS data in R before.</p>
<p>For more details about how to load geographic data using ipumsr, see
the vignette “ipums-geography”
(<code><a href="../articles/ipums-geography.html">vignette("ipums-geography", package = "ipumsr")</a></code>)</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://www.ipums.org" class="external-link">IPUMS</a> at the University of Minnesota.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> .</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '4ffa912ace97d2493f6ed39f20e94316',
    indexName: 'ipumsr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
