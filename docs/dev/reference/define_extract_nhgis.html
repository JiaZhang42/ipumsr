<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Define an IPUMS NHGIS extract request — define_extract_nhgis • ipumsr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Define an IPUMS NHGIS extract request — define_extract_nhgis"><meta property="og:description" content='Define an IPUMS NHGIS request to be submitted via the IPUMS
API. An extract request contains the specifications required
to obtain a particular set of data from the IPUMS NHGIS system.
Use get_nhgis_metadata() to browse and identify data sources for use
in NHGIS extract definitions.
See Details section for information about creating valid extract
definitions. For general information, see the NHGIS
data source overview and the
FAQ.
Learn more about the IPUMS API in vignette("ipums-api").'><meta property="og:image" content="http://tech.popdata.org/ipumsr/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ipumsr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.5.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ipums.html">Introduction</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/ipums-read.html">Read IPUMS data</a>
    </li>
    <li>
      <a href="../articles/value-labels.html">Value labels</a>
    </li>
    <li>
      <a href="../articles/ipums-bigdata.html">Big IPUMS data</a>
    </li>
    <li>
      <a href="../articles/ipums-api.html">Interact with the IPUMS API</a>
    </li>
    <li class="divider">
    <li>
      <a href="https://ipums.org/exercises.shtml" class="external-link">Project-specific exercises</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ipums/ipumsr" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://forum.ipums.org" class="external-link">
    <span class="fa fa-users"></span>
     
  </a>
</li>
<li>
  <a href="https://www.ipums.org/" class="external-link">
    <span class="fa fa-globe"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Define an IPUMS NHGIS extract request</h1>
    <small class="dont-index">Source: <a href="https://github.com/ipums/ipumsr/blob/HEAD/R/api.R" class="external-link"><code>R/api.R</code></a></small>
    <div class="hidden name"><code>define_extract_nhgis.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Define an IPUMS NHGIS request to be submitted via the IPUMS
API. An extract request contains the specifications required
to obtain a particular set of data from the IPUMS NHGIS system.</p>
<p>Use <code><a href="get_nhgis_metadata.html">get_nhgis_metadata()</a></code> to browse and identify data sources for use
in NHGIS extract definitions.</p>
<p>See Details section for information about creating valid extract
definitions. For general information, see the NHGIS
<a href="https://www.nhgis.org/data-availability" class="external-link">data source overview</a> and the
<a href="https://www.nhgis.org/frequently-asked-questions-faq" class="external-link">FAQ</a>.</p>
<p>Learn more about the IPUMS API in <code><a href="../articles/ipums-api.html">vignette("ipums-api")</a></code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">define_extract_nhgis</span><span class="op">(</span>
  description <span class="op">=</span> <span class="st">""</span>,
  datasets <span class="op">=</span> <span class="cn">NULL</span>,
  data_tables <span class="op">=</span> <span class="cn">NULL</span>,
  time_series_tables <span class="op">=</span> <span class="cn">NULL</span>,
  geog_levels <span class="op">=</span> <span class="cn">NULL</span>,
  years <span class="op">=</span> <span class="cn">NULL</span>,
  breakdown_values <span class="op">=</span> <span class="cn">NULL</span>,
  geographic_extents <span class="op">=</span> <span class="cn">NULL</span>,
  shapefiles <span class="op">=</span> <span class="cn">NULL</span>,
  breakdown_and_data_type_layout <span class="op">=</span> <span class="cn">NULL</span>,
  tst_layout <span class="op">=</span> <span class="cn">NULL</span>,
  data_format <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>description</dt>
<dd><p>Description of the extract.</p></dd>


<dt>datasets</dt>
<dd><p><a href="https://www.nhgis.org/overview-nhgis-datasets" class="external-link">Datasets</a>
to include in the extract request.</p></dd>


<dt>data_tables</dt>
<dd><p>Summary tables to retrieve for each of the requested
<code>datasets</code>. Required for all <code>datasets</code> in the extract definition.</p>
<p>See Details section for syntax options when an extract definition has
multiple <code>datasets</code>.</p></dd>


<dt>time_series_tables</dt>
<dd><p><a href="https://www.nhgis.org/time-series-tables" class="external-link">Time series tables</a>
to include in the extract request.</p></dd>


<dt>geog_levels</dt>
<dd><p>Geographic levels (e.g. <code>"county"</code> or <code>"state"</code>)
at which to obtain data for the requested <code>datasets</code> or
<code>time_series_tables</code>. Required for all <code>datasets</code> and <code>time_series_tables</code>
in the extract definition.</p>
<p>See Details section for syntax options when an extract
definition has multiple <code>datasets</code> and/or <code>time_series_tables</code>.</p></dd>


<dt>years</dt>
<dd><p>Years for which to obtain the data contained in the requested
<code>datasets</code>. Use <code>"*"</code> to select all available years for a given dataset.
Use <code><a href="get_nhgis_metadata.html">get_nhgis_metadata()</a></code> to determine if a dataset allows year selection.</p>
<p>See Details section for syntax options when an extract definition has
multiple <code>datasets</code>.</p></dd>


<dt>breakdown_values</dt>
<dd><p><a href="https://www.nhgis.org/frequently-asked-questions-faq#breakdowns" class="external-link">Breakdown values</a>
to apply to the requested <code>datasets</code>.</p>
<p>See Details section for syntax options when an extract definition has
multiple <code>datasets</code>.</p></dd>


<dt>geographic_extents</dt>
<dd><p>Vector of geographic extents to use for
all of the <code>datasets</code> in the extract definition (for instance, to obtain
data within a particular state). Use <code>"*"</code> to select all available extents.</p>
<p>Required when the extract definition includes any <code>geog_levels</code> that
require extent selection. See <code><a href="get_nhgis_metadata.html">get_nhgis_metadata()</a></code> to determine if a
geographic level requires extent selection. At the time of writing, NHGIS
supports extent selection only for blocks and block groups.</p></dd>


<dt>shapefiles</dt>
<dd><p><a href="https://www.nhgis.org/gis-files" class="external-link">Shapefiles</a> to include
in the extract request.</p></dd>


<dt>breakdown_and_data_type_layout</dt>
<dd><p>The desired layout
of any <code>datasets</code> that have multiple data types or breakdown values.</p><ul><li><p><code>"single_file"</code> (default) keeps all data types and breakdown values in
one file</p></li>
<li><p><code>"separate_files"</code> splits each data type or breakdown value into its
own file</p></li>
</ul><p>Required if any <code>datasets</code> included in the extract definition consist of
multiple data types (for instance, estimates and margins of error) or have
multiple breakdown values specified. See <code><a href="get_nhgis_metadata.html">get_nhgis_metadata()</a></code> to
determine whether a requested dataset has multiple data types.</p></dd>


<dt>tst_layout</dt>
<dd><p>The desired layout of all <code>time_series_tables</code> included in
the extract definition. One of:</p><ul><li><p><code>"time_by_column_layout"</code> (wide format, default): rows correspond to
geographic units, columns correspond to different times in the time
series</p></li>
<li><p><code>"time_by_row_layout"</code> (long format): rows correspond to a single
geographic unit at a single point in time</p></li>
<li><p><code>"time_by_file_layout"</code>: data for different times are provided in
separate files</p></li>
</ul><p>Required when an extract definition includes any <code>time_series_tables</code>.</p></dd>


<dt>data_format</dt>
<dd><p>The desired format of the extract data file. One of:</p><ul><li><p><code>"csv_no_header"</code> (default) includes only a minimal header in the first
row</p></li>
<li><p><code>"csv_header"</code> includes a second, more descriptive header row.
(By default this header is removed when reading data with <code><a href="read_nhgis.html">read_nhgis()</a></code>,
but it can be retained.)</p></li>
<li><p><code>"fixed_width"</code> provides data in a fixed width format</p></li>
</ul><p>Required when an extract definition includes any <code>datasets</code> or
<code>time_series_tables</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An object of class <code><a href="ipums_extract-class.html">nhgis_extract</a></code> containing
the extract definition.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>An NHGIS extract definition must include at least one dataset, time series
table, or shapefile. For extract definitions that include any <code>datasets</code>,
corresponding <code>data_tables</code> and <code>geog_levels</code> must be specified. For
extract definitions that include any <code>time_series_tables</code>, corresponding
<code>geog_levels</code> must be specified.</p>
<p>NHGIS extract definitions may contain multiple <code>datasets</code> or
<code>time_series_tables.</code> Each dataset or time series table is associated with
several subfields that apply only to that particular dataset or time series
table.</p>
<p>The following arguments are applied to the requested <code>datasets</code>:</p><ul><li><p><code>data_tables</code></p></li>
<li><p><code>years</code></p></li>
<li><p><code>breakdown_values</code></p></li>
</ul><p>The following arguments are applied to the requested <code>datasets</code> <em>and</em>
<code>time_series_tables</code>:</p><ul><li><p><code>geog_levels</code></p></li>
</ul><p>To apply the values of these arguments to <em>all</em> of the <code>datasets</code> and/or
<code>time_series_tables</code> in the extract definition, pass the values as a vector:</p>
<p></p><div class="sourceCode r"><pre><code><span class="fu"><a href="../reference/define_extract_nhgis.html">define_extract_nhgis</a></span><span class="op">(</span>
  datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2016_2020_ACS5a"</span>, <span class="st">"2017_2021_ACS5a"</span><span class="op">)</span>,
  data_tables <span class="op">=</span> <span class="st">"B01001"</span>,
  geog_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"county"</span>, <span class="st">"state"</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; Unsubmitted IPUMS NHGIS extract </span>
<span class="co">#&gt; Description: </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Dataset: 2016_2020_ACS5a</span>
<span class="co">#&gt;   Tables: B01001</span>
<span class="co">#&gt;   Geog Levels: county, state</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Dataset: 2017_2021_ACS5a</span>
<span class="co">#&gt;   Tables: B01001</span>
<span class="co">#&gt;   Geog Levels: county, state</span></code></pre><p></p></div>
<p>To apply the values of these arguments to <em>specific</em> <code>datasets</code> and/or
<code>time_series_tables</code> in the extract definition, pass the values as a named
list. In this case, names should correspond to the <code>datasets</code> and/or
<code>time_series_tables</code> and their associated values will only be applied to
the indicated dataset or time series table:</p>
<p></p><div class="sourceCode r"><pre><code><span class="fu"><a href="../reference/define_extract_nhgis.html">define_extract_nhgis</a></span><span class="op">(</span>
  datasets <span class="op">=</span> <span class="st">"2016_2020_ACS5a"</span>,
  data_tables <span class="op">=</span> <span class="st">"B01001"</span>,
  time_series_tables <span class="op">=</span> <span class="st">"A00"</span>,
  geog_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="st">"2016_2020_ACS5a"</span> <span class="op">=</span> <span class="st">"county"</span>,
    <span class="st">"A00"</span> <span class="op">=</span> <span class="st">"state"</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; Unsubmitted IPUMS NHGIS extract </span>
<span class="co">#&gt; Description: </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Dataset: 2016_2020_ACS5a</span>
<span class="co">#&gt;   Tables: B01001</span>
<span class="co">#&gt;   Geog Levels: county</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Time Series Table: A00</span>
<span class="co">#&gt;   Geog Levels: state</span></code></pre><p></p></div>
<p>Note that while it is possible to match elements to <code>datasets</code> and/or
<code>time_series_tables</code> by index by providing an unnamed list, we recommend
using names to explicitly specify the values that should be applied to each
of the request's <code>datasets</code> and <code>time_series_tables</code>.</p>
<p>Alternatively, you can create multiple extract definitions and combine
them with <code><a href="combine_extracts.html">combine_extracts()</a></code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="get_nhgis_metadata.html">get_nhgis_metadata()</a></code> to find data to include in an extract definition.</p>
<p><code><a href="submit_extract.html">submit_extract()</a></code>, <code><a href="download_extract.html">download_extract()</a></code>, and <code><a href="get_extract_info.html">get_extract_info()</a></code> to
process and manage an extract request.</p>
<p><code><a href="define_extract_from_json.html">save_extract_as_json()</a></code> and <code><a href="define_extract_from_json.html">define_extract_from_json()</a></code> to share an
extract definition.</p>
<p><code><a href="add_to_extract.nhgis_extract.html">add_to_extract()</a></code>,
<code><a href="remove_from_extract.nhgis_extract.html">remove_from_extract()</a></code> and
<code><a href="combine_extracts.html">combine_extracts()</a></code> to
revise an extract definition.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Extract definition for tables from an NHGIS dataset</span></span>
<span class="r-in"><span class="va">my_extract</span> <span class="op">&lt;-</span> <span class="fu">define_extract_nhgis</span><span class="op">(</span></span>
<span class="r-in">  description <span class="op">=</span> <span class="st">"Example NHGIS extract"</span>,</span>
<span class="r-in">  datasets <span class="op">=</span> <span class="st">"1990_STF3"</span>,</span>
<span class="r-in">  data_tables <span class="op">=</span> <span class="st">"NP57"</span>,</span>
<span class="r-in">  geog_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"county"</span>, <span class="st">"tract"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">my_extract</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unsubmitted IPUMS NHGIS extract </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Description: Example NHGIS extract</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">Dataset: </span>1990_STF3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Tables: </span>NP57</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>county, tract</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Extract definition for an NHGIS time series table</span></span>
<span class="r-in"><span class="fu">define_extract_nhgis</span><span class="op">(</span></span>
<span class="r-in">  description <span class="op">=</span> <span class="st">"Example NHGIS extract"</span>,</span>
<span class="r-in">  time_series_tables <span class="op">=</span> <span class="st">"CL8"</span>,</span>
<span class="r-in">  geog_levels <span class="op">=</span> <span class="st">"county"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unsubmitted IPUMS NHGIS extract </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Description: Example NHGIS extract</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00; font-weight: bold;">Time Series Table: </span>CL8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>county</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Use get_nhgis_metadata() to identify data source names</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="fu"><a href="get_nhgis_metadata.html">get_nhgis_metadata</a></span><span class="op">(</span><span class="st">"time_series_tables"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Fields that are attached to specific datasets/time series tables</span></span>
<span class="r-in"><span class="co"># are recycled to all datasets/time series tables in an extract by default</span></span>
<span class="r-in"><span class="fu">define_extract_nhgis</span><span class="op">(</span></span>
<span class="r-in">  description <span class="op">=</span> <span class="st">"Extract definition with multiple datasets"</span>,</span>
<span class="r-in">  datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2014_2018_ACS5a"</span>, <span class="st">"2015_2019_ACS5a"</span><span class="op">)</span>,</span>
<span class="r-in">  data_tables <span class="op">=</span> <span class="st">"B01001"</span>,</span>
<span class="r-in">  geog_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"state"</span>, <span class="st">"county"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unsubmitted IPUMS NHGIS extract </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Description: Extract definition with multiple datasets</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">Dataset: </span>2014_2018_ACS5a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Tables: </span>B01001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>state, county</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">Dataset: </span>2015_2019_ACS5a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Tables: </span>B01001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>state, county</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># To instead attach specific values to each dataset or time series table,</span></span>
<span class="r-in"><span class="co"># use a named list instead of a vector:</span></span>
<span class="r-in"><span class="fu">define_extract_nhgis</span><span class="op">(</span></span>
<span class="r-in">  description <span class="op">=</span> <span class="st">"Extract with multiple time series tables"</span>,</span>
<span class="r-in">  time_series_tables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CW3"</span>, <span class="st">"CW5"</span><span class="op">)</span>,</span>
<span class="r-in">  geog_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>CW5 <span class="op">=</span> <span class="st">"county"</span>, CW3 <span class="op">=</span> <span class="st">"state"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unsubmitted IPUMS NHGIS extract </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Description: Extract with multiple time series tables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00; font-weight: bold;">Time Series Table: </span>CW3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>state</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00; font-weight: bold;">Time Series Table: </span>CW5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>county</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># For extracts with datasets and time series tables,</span></span>
<span class="r-in"><span class="co"># geog_levels are matched to both sources:</span></span>
<span class="r-in"><span class="fu">define_extract_nhgis</span><span class="op">(</span></span>
<span class="r-in">  description <span class="op">=</span> <span class="st">"Extract with datasets and time series tables"</span>,</span>
<span class="r-in">  datasets <span class="op">=</span> <span class="st">"1990_STF1"</span>,</span>
<span class="r-in">  data_tables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NP1"</span>, <span class="st">"NP2"</span><span class="op">)</span>,</span>
<span class="r-in">  time_series_tables <span class="op">=</span> <span class="st">"CL6"</span>,</span>
<span class="r-in">  geog_levels <span class="op">=</span> <span class="st">"state"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unsubmitted IPUMS NHGIS extract </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Description: Extract with datasets and time series tables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">Dataset: </span>1990_STF1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Tables: </span>NP1, NP2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>state</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00; font-weight: bold;">Time Series Table: </span>CL6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>state</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">define_extract_nhgis</span><span class="op">(</span></span>
<span class="r-in">  description <span class="op">=</span> <span class="st">"Extract with datasets and time series tables"</span>,</span>
<span class="r-in">  datasets <span class="op">=</span> <span class="st">"1990_STF1"</span>,</span>
<span class="r-in">  data_tables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NP1"</span>, <span class="st">"NP2"</span><span class="op">)</span>,</span>
<span class="r-in">  time_series_tables <span class="op">=</span> <span class="st">"CL6"</span>,</span>
<span class="r-in">  geog_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"1990_STF1"</span> <span class="op">=</span> <span class="st">"county"</span>, <span class="st">"CL6"</span> <span class="op">=</span> <span class="st">"state"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unsubmitted IPUMS NHGIS extract </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Description: Extract with datasets and time series tables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">Dataset: </span>1990_STF1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Tables: </span>NP1, NP2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>county</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00; font-weight: bold;">Time Series Table: </span>CL6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>state</span>
<span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># Use the extract definition to submit an extract request to the API</span></span>
<span class="r-in"><span class="fu"><a href="submit_extract.html">submit_extract</a></span><span class="op">(</span><span class="va">my_extract</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://www.ipums.org" class="external-link">IPUMS</a> at the University of Minnesota.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> .</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '4ffa912ace97d2493f6ed39f20e94316',
    indexName: 'ipumsr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

