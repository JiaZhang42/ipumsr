<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read data from an NHGIS extract — read_nhgis • ipumsr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Read data from an NHGIS extract — read_nhgis" />
<meta property="og:description" content="Reads a dataset downloaded from the NHGIS extract system. Relies on csv files
(with or without the extra header row)." />
<meta property="og:image" content="http://tech.popdata.org/ipumsr/logo.png" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ipumsr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.4.5.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ipums.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ipums.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/value-labels.html">Value labels</a>
    </li>
    <li>
      <a href="../articles/ipums-geography.html">Geographic data in ipumsr</a>
    </li>
    <li>
      <a href="../articles/ipums-bigdata.html">Big IPUMS data</a>
    </li>
    <li>
      <a href="../articles/ipums-api.html">IPUMS data extract API</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../articles/ipums-cps.html">CPS exercise</a>
    </li>
    <li>
      <a href="../articles/ipums-nhgis.html">NHGIS exercise</a>
    </li>
    <li>
      <a href="../articles/ipums-terra.html">IPUMS Terra exercise</a>
    </li>
    <li>
      <a href="https://ipums.org/exercises.shtml">More project exercises</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mnpopcenter/ipumsr">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://forum.ipums.org">
    <span class="fa fa-users"></span>
     
  </a>
</li>
<li>
  <a href="https://www.ipums.org/">
    <span class="fa fa-globe"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read data from an NHGIS extract</h1>
    <small class="dont-index">Source: <a href='https://github.com/mnpopcenter/ipumsr/blob/master/R/nhgis_read.r'><code>R/nhgis_read.r</code></a></small>
    <div class="hidden name"><code>read_nhgis.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Reads a dataset downloaded from the NHGIS extract system. Relies on csv files
(with or without the extra header row).</p>
    </div>

    <pre class="usage"><span class='fu'>read_nhgis</span><span class='op'>(</span>
  <span class='va'>data_file</span>,
  data_layer <span class='op'>=</span> <span class='cn'>NULL</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>,
  var_attrs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"val_labels"</span>, <span class='st'>"var_label"</span>, <span class='st'>"var_desc"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>read_nhgis_sf</span><span class='op'>(</span>
  <span class='va'>data_file</span>,
  <span class='va'>shape_file</span>,
  data_layer <span class='op'>=</span> <span class='cn'>NULL</span>,
  shape_layer <span class='op'>=</span> <span class='va'>data_layer</span>,
  shape_encoding <span class='op'>=</span> <span class='st'>"latin1"</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>,
  var_attrs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"val_labels"</span>, <span class='st'>"var_label"</span>, <span class='st'>"var_desc"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>read_nhgis_sp</span><span class='op'>(</span>
  <span class='va'>data_file</span>,
  <span class='va'>shape_file</span>,
  data_layer <span class='op'>=</span> <span class='cn'>NULL</span>,
  shape_layer <span class='op'>=</span> <span class='va'>data_layer</span>,
  shape_encoding <span class='op'>=</span> <span class='st'>"latin1"</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>,
  var_attrs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"val_labels"</span>, <span class='st'>"var_label"</span>, <span class='st'>"var_desc"</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data_file</th>
      <td><p>Filepath to the data (either the .zip file directly
downloaded from the website, the path to the unzipped folder, or
the path to the unzipped .csv file directly).</p></td>
    </tr>
    <tr>
      <th>data_layer</th>
      <td><p>For .zip extracts with multiple datasets, the name of the
 data to load. Accepts a character vector specifying the file name, or
<code><a href='dplyr_select_style.html'>dplyr_select_style</a></code> conventions. Data layer must uniquely identify
a dataset.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical, indicating whether to print progress information to
console.</p></td>
    </tr>
    <tr>
      <th>var_attrs</th>
      <td><p>Variable attributes to add from the codebook, defaults to
adding all (val_labels, var_label and var_desc). See
<code><a href='set_ipums_var_attributes.html'>set_ipums_var_attributes</a></code> for more details.</p></td>
    </tr>
    <tr>
      <th>shape_file</th>
      <td><p>Filepath to the shape files (either the .zip
file directly downloaded from the website, or the path to the unzipped
folder, or the unzipped .shp file directly).</p></td>
    </tr>
    <tr>
      <th>shape_layer</th>
      <td><p>(Defaults to using the same value as data_layer) Specification
of which shape files to load using the same semantics as <code>data_layer</code>. Can
load multiple shape files, which will be combined.</p></td>
    </tr>
    <tr>
      <th>shape_encoding</th>
      <td><p>The text encoding to use when reading the shape file. Typically
the defaults should read the data correctly, but for some extracts you may need
to set them manually, but if funny characters appear in your data, you may need
to. Defaults to "latin1" for NHGIS.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>read_nhgis</code> returns a <code>tbl_df</code> with only the tabular data,
<code>read_nhgis_sf</code> returns a <code>sf</code> object with data and the shapes, and
<code>read_nhgis_sp</code> returns a <code>SpatialPolygonsDataFrame</code> with data and
shapes.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other ipums_read: 
<code><a href='read_ipums_micro_chunked.html'>read_ipums_micro_chunked</a>()</code>,
<code><a href='read_ipums_micro_yield.html'>read_ipums_micro_yield</a>()</code>,
<code><a href='read_ipums_micro.html'>read_ipums_micro</a>()</code>,
<code><a href='read_ipums_sf.html'>read_ipums_sf</a>()</code>,
<code><a href='read_terra_area.html'>read_terra_area</a>()</code>,
<code><a href='read_terra_micro.html'>read_terra_micro</a>()</code>,
<code><a href='read_terra_raster.html'>read_terra_raster</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='va'>csv_file</span> <span class='op'>&lt;-</span> <span class='fu'><a href='ipums_example.html'>ipums_example</a></span><span class='op'>(</span><span class='st'>"nhgis0008_csv.zip"</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>shape_file</span> <span class='op'>&lt;-</span> <span class='fu'><a href='ipums_example.html'>ipums_example</a></span><span class='op'>(</span><span class='st'>"nhgis0008_shape_small.zip"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>data_only</span> <span class='op'>&lt;-</span> <span class='fu'>read_nhgis</span><span class='op'>(</span><span class='va'>csv_file</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Use of data from NHGIS is subject to conditions including that users should</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> cite the data appropriately. Use command `ipums_conditions()` for more details.</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Reading data file...</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># If sf package is availble, can load as sf object</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://r-spatial.github.io/sf/'>sf</a></span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'>  <span class='va'>sf_data</span> <span class='op'>&lt;-</span> <span class='fu'>read_nhgis_sf</span><span class='op'>(</span><span class='va'>csv_file</span>, <span class='va'>shape_file</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Use of data from NHGIS is subject to conditions including that users should</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> cite the data appropriately. Use command `ipums_conditions()` for more details.</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Reading data file...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Reading geography...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> options:        ENCODING=latin1 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Reading layer `US_pmsa_1990' from data source </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   `C:\Users\derek\AppData\Local\Temp\RtmpQxVfZV\file4fe068e049ae\US_pmsa_1990.shp' </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   using driver `ESRI Shapefile'</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Simple feature collection with 71 features and 8 fields</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Geometry type: MULTIPOLYGON</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Dimension:     XY</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Bounding box:  xmin: -2336182 ymin: -1247086 xmax: 2075339 ymax: 1476544</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Projected CRS: Albers</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># If sp package is available, can load as SpatialPolygonsDataFrame</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='http://rgdal.r-forge.r-project.org'>rgdal</a></span><span class='op'>)</span> <span class='op'>&amp;&amp;</span> <span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/edzer/sp/'>sp</a></span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'>  <span class='va'>sp_data</span> <span class='op'>&lt;-</span> <span class='fu'>read_nhgis_sp</span><span class='op'>(</span><span class='va'>csv_file</span>, <span class='va'>shape_file</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Loading required package: rgdal</span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span class='warning'>Warning: </span>there is no package called 'rgdal'</span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href="https://www.ipums.org">IPUMS</a> at the University of Minnesota.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '4ffa912ace97d2493f6ed39f20e94316',
    indexName: 'ipumsr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


