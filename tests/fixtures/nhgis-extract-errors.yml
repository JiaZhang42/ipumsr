http_interactions:
- request:
    method: get
    uri: https://api.ipums.org/extracts/?collection=nhgis&version=v1&limit=1
    body:
      encoding: ''
      string: ''
    headers:
      Accept: application/json, text/xml, application/xml, */*
      Content-Type: application/json
      Authorization: foobar
  response:
    status:
      status_code: 403
      category: Client error
      reason: Forbidden
      message: 'Client error: (403) Forbidden'
    headers:
      content-type: application/json
      date: Thu, 23 Mar 2023 20:03:00 GMT
      vary: Origin
      x-generator: tyk.io
      content-length: '57'
    body:
      encoding: ''
      file: no
      string: |-
        {
            "error": "Access to this API has been disallowed"
        }
  recorded_at: 2023-03-23 20:03:01 GMT
  recorded_with: vcr/1.2.0, webmockr/0.8.0
- request:
    method: get
    uri: https://api.ipums.org/extracts/1092?collection=nhgis&version=v1
    body:
      encoding: ''
      string: ''
    headers:
      Accept: application/json, text/xml, application/xml, */*
      Content-Type: application/json
      Authorization: <<<IPUMS_API_KEY>>>
  response:
    status:
      status_code: 404
      category: Client error
      reason: Not Found
      message: 'Client error: (404) Not Found'
    headers:
      content-type: text/html; charset=UTF-8
      date: Thu, 23 Mar 2023 20:03:01 GMT
      server: nginx/1.18.0
      vary: Origin
      x-ratelimit-limit: '-1'
      x-ratelimit-remaining: '0'
      x-ratelimit-reset: '0'
      x-request-id: 4d2d41db-2bc0-4e42-8b71-46b723cc9bea
      x-runtime: '0.612957'
      content-length: '0'
    body:
      encoding: ''
      file: no
      string: ''
  recorded_at: 2023-03-23 20:03:01 GMT
  recorded_with: vcr/1.2.0, webmockr/0.8.0
- request:
    method: get
    uri: https://api.ipums.org/extracts/?collection=nhgis&version=v1&limit=1
    body:
      encoding: ''
      string: ''
    headers:
      Accept: application/json, text/xml, application/xml, */*
      Content-Type: application/json
      Authorization: <<<IPUMS_API_KEY>>>
  response:
    status:
      status_code: 200
      category: Success
      reason: OK
      message: 'Success: (200) OK'
    headers:
      cache-control: max-age=0, private, must-revalidate
      content-type: application/json; charset=utf-8
      date: Thu, 23 Mar 2023 20:03:01 GMT
      etag: W/"050d84d2dabf2839ff530036b1acc683"
      referrer-policy: strict-origin-when-cross-origin
      server: nginx/1.18.0
      vary: Origin
      x-content-type-options: nosniff
      x-download-options: noopen
      x-frame-options: SAMEORIGIN
      x-permitted-cross-domain-policies: none
      x-ratelimit-limit: '-1'
      x-ratelimit-remaining: '0'
      x-ratelimit-reset: '0'
      x-request-id: 30b1ef2a-9be8-49dc-9724-34c60d7b5b57
      x-runtime: '0.586124'
      x-xss-protection: '0'
      content-length: '897'
    body:
      encoding: ''
      file: no
      string: '[{"data_format":"csv_no_header","description":"Extract for R client
        testing","datasets":{"2014_2018_ACS5a":{"data_tables":["B01001","B01002"],"geog_levels":["nation"],"breakdown_values":["bs32.ge00"]},"2015_2019_ACS5a":{"data_tables":["B01001","B01002"],"geog_levels":["blck_grp"],"breakdown_values":["bs32.ge00"]}},"time_series_tables":{"CW3":{"geog_levels":["state"]}},"time_series_table_layout":"time_by_row_layout","shapefiles":["110_blck_grp_2019_tl2019"],"geographic_extents":["110","420"],"breakdown_and_data_type_layout":"single_file","number":1091,"status":"completed","download_links":{"codebook_preview":"https://api.ipums.org/downloads/nhgis/api/v1/extracts/1992256/nhgis1091_csv_PREVIEW.zip","table_data":"https://api.ipums.org/downloads/nhgis/api/v1/extracts/1992256/nhgis1091_csv.zip","gis_data":"https://api.ipums.org/downloads/nhgis/api/v1/extracts/1992256/nhgis1091_shape.zip"}}]'
  recorded_at: 2023-03-23 20:03:02 GMT
  recorded_with: vcr/1.2.0, webmockr/0.8.0
- request:
    method: post
    uri: https://api.ipums.org/extracts/?collection=nhgis&version=v1
    body:
      encoding: ''
      string: '{"datasets":{"foo":{"data_tables":[null],"geog_levels":[null]}}}'
    headers:
      Accept: application/json, text/xml, application/xml, */*
      Content-Type: application/json
      Authorization: <<<IPUMS_API_KEY>>>
  response:
    status:
      status_code: 400
      category: Client error
      reason: Bad Request
      message: 'Client error: (400) Bad Request'
    headers:
      cache-control: no-cache
      content-type: application/json; charset=utf-8
      date: Thu, 23 Mar 2023 20:03:01 GMT
      referrer-policy: strict-origin-when-cross-origin
      server: nginx/1.18.0
      vary: Origin
      x-content-type-options: nosniff
      x-download-options: noopen
      x-frame-options: SAMEORIGIN
      x-permitted-cross-domain-policies: none
      x-ratelimit-limit: '-1'
      x-ratelimit-remaining: '0'
      x-ratelimit-reset: '0'
      x-request-id: 20dfbc8e-faeb-467d-95d6-59faf8fdbc73
      x-runtime: '0.062602'
      x-xss-protection: '0'
      content-length: '208'
    body:
      encoding: ''
      file: no
      string: '{"type":"SemanticValidationError","status":{"code":400,"name":"Bad
        Request"},"detail":["Datasets invalid: ''foo''","Data format invalid: '''';
        valid options include ''csv_no_header'', ''csv_header'', ''fixed_width''"]}'
  recorded_at: 2023-03-23 20:03:02 GMT
  recorded_with: vcr/1.2.0, webmockr/0.8.0
